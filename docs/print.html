<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SimpleAnimate Docs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SimpleAnimate Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="simpleanimate-api"><a class="header" href="#simpleanimate-api">SimpleAnimate API</a></h1>
<p>The top-level SimpleAnimate module provides factory functions for creating and managing animation controllers.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="new"><a class="header" href="#new"><code>new()</code></a></h3>
<p>Creates a new AnimationController instance.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function new(
    rig: Model,
    doPreload: boolean?,
    coreAnimations: AnimationsList?,
    emoteAnimations: AnimationsList?,
    stateMachine: StateMachine?
): AnimationController
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model (must contain an Animator)</li>
<li><code>doPreload</code> - Whether to preload animations (default: <code>true</code>)</li>
<li><code>coreAnimations</code> - Custom core animations (defaults to R15)</li>
<li><code>emoteAnimations</code> - Custom emote animations (defaults to R15)</li>
<li><code>stateMachine</code> - Custom state machine (defaults to Humanoid)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController</code> - A new controller instance</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage with defaults:</p>
<pre><code class="language-lua">local controller = SimpleAnimate.new(character)
</code></pre>
<p>With custom animations:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R15")
coreAnims.Idle[1].id = "rbxassetid://123456789"

local controller = SimpleAnimate.new(
    character,
    true,
    coreAnims,
    emoteAnims
)
</code></pre>
<p>Without preloading (load animations on-demand):</p>
<pre><code class="language-lua">local controller = SimpleAnimate.new(character, false)
</code></pre>
<p>With custom state machine:</p>
<pre><code class="language-lua">local customStateMachine = character:FindFirstChild("CustomHumanoid")
local controller = SimpleAnimate.new(
    character,
    true,
    nil,
    nil,
    customStateMachine
)
</code></pre>
<hr />
<h3 id="fromexisting"><a class="header" href="#fromexisting"><code>fromExisting()</code></a></h3>
<p>Gets an existing AnimationController for the specified rig.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function fromExisting(rig: Model): AnimationController?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model to get the controller for</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController?</code> - The existing controller or <code>nil</code> if none exists</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local controller = SimpleAnimate.fromExisting(character)

if controller then
    print("Controller already exists!")
    controller.Core.PoseController:ChangePose("Idle")
else
    print("No controller found, creating new one...")
    controller = SimpleAnimate.new(character)
end
</code></pre>
<p>Checking multiple characters:</p>
<pre><code class="language-lua">for _, player in Players:GetPlayers() do
    local char = player.Character
    if char then
        local controller = SimpleAnimate.fromExisting(char)
        if controller then
            print(player.Name, "has a controller")
        end
    end
end
</code></pre>
<hr />
<h3 id="awaitcontroller"><a class="header" href="#awaitcontroller"><code>awaitController()</code></a></h3>
<p>Waits for an AnimationController to be created for the specified rig. Yields until available or timeout occurs.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function awaitController(rig: Model, timeOut: number?): AnimationController?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model to wait for</li>
<li><code>timeOut</code> - Timeout in seconds (default: <code>5</code>)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController?</code> - The controller or <code>nil</code> on timeout</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage:</p>
<pre><code class="language-lua">-- Wait up to 5 seconds for controller
local controller = SimpleAnimate.awaitController(character)

if controller then
    print("Controller ready!")
else
    warn("Controller not found within timeout")
end
</code></pre>
<p>Custom timeout:</p>
<pre><code class="language-lua">-- Wait up to 10 seconds
local controller = SimpleAnimate.awaitController(character, 10)
</code></pre>
<p>Useful in separate scripts:</p>
<pre><code class="language-lua">-- Script A creates the controller
SimpleAnimate.new(character)

-- Script B (elsewhere) waits for it
local controller = SimpleAnimate.awaitController(character)
controller.Action:PlayAction("wave")
</code></pre>
<hr />
<h3 id="getcopyofanimslist"><a class="header" href="#getcopyofanimslist"><code>getCopyOfAnimsList()</code></a></h3>
<p>Gets a deep copy of a default animation list by name and type.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getCopyOfAnimsList(
    name: "R6" | "R15",
    specifier: "Animations" | "Emotes"
): AnimationsList
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>name</code> - The rig type ("R6" or "R15")</li>
<li><code>specifier</code> - The list type ("Animations" or "Emotes")</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList</code> - A deep copy of the requested list</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Get R15 core animations:</p>
<pre><code class="language-lua">local r15Anims = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")

-- Modify as needed
r15Anims.Idle[1].speed = 0.8
r15Anims.Run[1].id = "rbxassetid://123456789"
</code></pre>
<p>Get R6 emotes:</p>
<pre><code class="language-lua">local r6Emotes = SimpleAnimate.getCopyOfAnimsList("R6", "Emotes")

-- Add custom emote
r6Emotes.customWave = {
    {
        id = "rbxassetid://987654321",
        weight = 10
    }
}
</code></pre>
<hr />
<h3 id="getcopyofanims"><a class="header" href="#getcopyofanims"><code>getCopyOfAnims()</code></a></h3>
<p>Gets deep copies of both default animation lists (Animations and Emotes).</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getCopyOfAnims(name: "R6" | "R15"): (AnimationsList, AnimationsList)
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>name</code> - The rig type ("R6" or "R15")</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList</code> - Core animations</li>
<li><code>AnimationsList</code> - Emote animations</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Get both R15 lists:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Customize both
coreAnims.Walk[1].speed = 1.2
emoteAnims.wave[1].fadeTime = 0.3

local controller = SimpleAnimate.new(character, true, coreAnims, emoteAnims)
</code></pre>
<p>Get R6 lists:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R6")
</code></pre>
<hr />
<h3 id="getanimpackageasync"><a class="header" href="#getanimpackageasync"><code>getAnimPackageAsync()</code></a></h3>
<p>Gets a player's equipped animation package asynchronously. Fills in missing animations with defaults.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getAnimPackageAsync(
    player: Player?,
    defaultPoseSourceIfUnavailable: AnimationsList?
): AnimationsList?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>player</code> - The player (required when called from server, optional on client)</li>
<li><code>defaultPoseSourceIfUnavailable</code> - Fallback animations (defaults to R15)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList?</code> - The player's animation package with defaults filled in</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Server-side:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Get player's equipped animations
        local anims = SimpleAnimate.getAnimPackageAsync(player)
        
        local controller = SimpleAnimate.new(character, true, anims)
    end)
end)
</code></pre>
<p>Client-side:</p>
<pre><code class="language-lua">local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Get local player's animations (no player parameter needed)
local anims = SimpleAnimate.getAnimPackageAsync()

local controller = SimpleAnimate.new(character, true, anims)
</code></pre>
<p>With custom fallbacks:</p>
<pre><code class="language-lua">local customDefaults = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")
customDefaults.Idle[1].id = "rbxassetid://123456789"

local anims = SimpleAnimate.getAnimPackageAsync(player, customDefaults)
</code></pre>
<hr />
<h3 id="getemotepackageasync"><a class="header" href="#getemotepackageasync"><code>getEmotePackageAsync()</code></a></h3>
<p>Gets a player's equipped emote package asynchronously.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getEmotePackageAsync(
    player: Player?,
    defaultEmoteSourceIfUnavailable: AnimationsList?
): AnimationsList?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>player</code> - The player (required when called from server)</li>
<li><code>defaultEmoteSourceIfUnavailable</code> - Fallback emotes (defaults to R15)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList?</code> - The player's emote package</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Server-side:</p>
<pre><code class="language-lua">Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local anims = SimpleAnimate.getAnimPackageAsync(player)
        local emotes = SimpleAnimate.getEmotePackageAsync(player)
        
        local controller = SimpleAnimate.new(
            character,
            true,
            anims,
            emotes
        )
    end)
end)
</code></pre>
<p>Client-side:</p>
<pre><code class="language-lua">local emotes = SimpleAnimate.getEmotePackageAsync()
</code></pre>
<h2 id="properties"><a class="header" href="#properties">Properties</a></h2>
<h3 id="preload"><a class="header" href="#preload"><code>Preload</code></a></h3>
<p>Reference to the Preload utility module.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-lua">local animator = character:FindFirstChildWhichIsA("Animator", true)
local animList = {
    Idle = {{id = "rbxassetid://123", weight = 10}}
}

local preloaded = SimpleAnimate.Preload.preloadAnimList(
    animator,
    animList,
    "core",
    Enum.AnimationPriority.Core,
    true
)
</code></pre>
<hr />
<h3 id="default"><a class="header" href="#default"><code>default</code></a></h3>
<p>Reference to default animation lists (DefaultAnims module).</p>
<p><strong>Example:</strong></p>
<pre><code class="language-lua">-- Access default R15 animations directly
local defaultR15 = SimpleAnimate.default.R15

print(defaultR15.Animations.Idle[1].id)
print(defaultR15.Emotes.wave[1].id)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h1>
<h2 id="basic-setup"><a class="header" href="#basic-setup">Basic Setup</a></h2>
<p>The simplest way to get started with SimpleAnimate:</p>
<pre><code class="language-lua">local SimpleAnimate = require(path.to.SimpleAnimate)

-- Wait for character
local character = player.Character or player.CharacterAdded:Wait()

-- Create controller with default R15 animations
local controller = SimpleAnimate.new(character)
</code></pre>
<p>That's it! The controller will automatically handle all character animations based on humanoid state changes.</p>
<h2 id="playing-an-emote"><a class="header" href="#playing-an-emote">Playing an Emote</a></h2>
<pre><code class="language-lua">-- Play a random animation from the "wave" emote
local track = controller.Action:PlayAction("wave")

-- Wait for it to finish
track.Stopped:Wait()
print("Wave animation completed!")
</code></pre>
<h2 id="changing-a-core-animation"><a class="header" href="#changing-a-core-animation">Changing a Core Animation</a></h2>
<pre><code class="language-lua">-- Change the idle animation
controller.Core.PoseController:ChangeCoreAnim(
    "Idle",
    1,
    "rbxassetid://YOUR_ANIMATION_ID"
)
</code></pre>
<h2 id="listening-to-pose-changes"><a class="header" href="#listening-to-pose-changes">Listening to Pose Changes</a></h2>
<pre><code class="language-lua">controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose, track)
    print(string.format("Pose changed: %s -&gt; %s", oldPose, newPose))
end)
</code></pre>
<h2 id="getting-current-state"><a class="header" href="#getting-current-state">Getting Current State</a></h2>
<pre><code class="language-lua">-- Get current pose
local currentPose = controller.Core.PoseController:GetPose()
print("Current pose:", currentPose) -- "Idle", "Walk", "Run", etc.

-- Get current animation track
local currentTrack = controller.Core.PoseController:GetCurrentTrack()
print("Current speed:", currentTrack.Speed)
</code></pre>
<h2 id="creating-custom-actions"><a class="header" href="#creating-custom-actions">Creating Custom Actions</a></h2>
<pre><code class="language-lua">-- Define a custom action
local customAction = {
    {
        id = "rbxassetid://123456789",
        weight = 10,
        speed = 1,
        fadeTime = 0.2
    }
}

-- Add it to the controller
controller.Action:CreateAction("myCustomAction", customAction)

-- Play it
controller.Action:PlayAction("myCustomAction")
</code></pre>
<h2 id="cleanup"><a class="header" href="#cleanup">Cleanup</a></h2>
<p>Always destroy the controller when done:</p>
<pre><code class="language-lua">-- Cleanup (automatically called when character is destroyed)
controller:Destroy()
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li>Learn about <a href="getting-started/../guides/custom-animations.html">Custom Animations</a></li>
<li>Explore the <a href="getting-started/../api/simpleanimate.html">API Reference</a></li>
<li>Check out more <a href="getting-started/../examples/basic-setup.html">Examples</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="simpleanimate-api-1"><a class="header" href="#simpleanimate-api-1">SimpleAnimate API</a></h1>
<p>The top-level SimpleAnimate module provides factory functions for creating and managing animation controllers.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="new-1"><a class="header" href="#new-1"><code>new()</code></a></h3>
<p>Creates a new AnimationController instance.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function new(
    rig: Model,
    doPreload: boolean?,
    coreAnimations: AnimationsList?,
    emoteAnimations: AnimationsList?,
    stateMachine: StateMachine?
): AnimationController
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model (must contain an Animator)</li>
<li><code>doPreload</code> - Whether to preload animations (default: <code>true</code>)</li>
<li><code>coreAnimations</code> - Custom core animations (defaults to R15)</li>
<li><code>emoteAnimations</code> - Custom emote animations (defaults to R15)</li>
<li><code>stateMachine</code> - Custom state machine (defaults to Humanoid)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController</code> - A new controller instance</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage with defaults:</p>
<pre><code class="language-lua">local controller = SimpleAnimate.new(character)
</code></pre>
<p>With custom animations:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R15")
coreAnims.Idle[1].id = "rbxassetid://123456789"

local controller = SimpleAnimate.new(
    character,
    true,
    coreAnims,
    emoteAnims
)
</code></pre>
<p>Without preloading (load animations on-demand):</p>
<pre><code class="language-lua">local controller = SimpleAnimate.new(character, false)
</code></pre>
<p>With custom state machine:</p>
<pre><code class="language-lua">local customStateMachine = character:FindFirstChild("CustomHumanoid")
local controller = SimpleAnimate.new(
    character,
    true,
    nil,
    nil,
    customStateMachine
)
</code></pre>
<hr />
<h3 id="fromexisting-1"><a class="header" href="#fromexisting-1"><code>fromExisting()</code></a></h3>
<p>Gets an existing AnimationController for the specified rig.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function fromExisting(rig: Model): AnimationController?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model to get the controller for</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController?</code> - The existing controller or <code>nil</code> if none exists</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local controller = SimpleAnimate.fromExisting(character)

if controller then
    print("Controller already exists!")
    controller.Core.PoseController:ChangePose("Idle")
else
    print("No controller found, creating new one...")
    controller = SimpleAnimate.new(character)
end
</code></pre>
<p>Checking multiple characters:</p>
<pre><code class="language-lua">for _, player in Players:GetPlayers() do
    local char = player.Character
    if char then
        local controller = SimpleAnimate.fromExisting(char)
        if controller then
            print(player.Name, "has a controller")
        end
    end
end
</code></pre>
<hr />
<h3 id="awaitcontroller-1"><a class="header" href="#awaitcontroller-1"><code>awaitController()</code></a></h3>
<p>Waits for an AnimationController to be created for the specified rig. Yields until available or timeout occurs.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function awaitController(rig: Model, timeOut: number?): AnimationController?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>rig</code> - The character model to wait for</li>
<li><code>timeOut</code> - Timeout in seconds (default: <code>5</code>)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationController?</code> - The controller or <code>nil</code> on timeout</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage:</p>
<pre><code class="language-lua">-- Wait up to 5 seconds for controller
local controller = SimpleAnimate.awaitController(character)

if controller then
    print("Controller ready!")
else
    warn("Controller not found within timeout")
end
</code></pre>
<p>Custom timeout:</p>
<pre><code class="language-lua">-- Wait up to 10 seconds
local controller = SimpleAnimate.awaitController(character, 10)
</code></pre>
<p>Useful in separate scripts:</p>
<pre><code class="language-lua">-- Script A creates the controller
SimpleAnimate.new(character)

-- Script B (elsewhere) waits for it
local controller = SimpleAnimate.awaitController(character)
controller.Action:PlayAction("wave")
</code></pre>
<hr />
<h3 id="getcopyofanimslist-1"><a class="header" href="#getcopyofanimslist-1"><code>getCopyOfAnimsList()</code></a></h3>
<p>Gets a deep copy of a default animation list by name and type.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getCopyOfAnimsList(
    name: "R6" | "R15",
    specifier: "Animations" | "Emotes"
): AnimationsList
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>name</code> - The rig type ("R6" or "R15")</li>
<li><code>specifier</code> - The list type ("Animations" or "Emotes")</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList</code> - A deep copy of the requested list</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Get R15 core animations:</p>
<pre><code class="language-lua">local r15Anims = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")

-- Modify as needed
r15Anims.Idle[1].speed = 0.8
r15Anims.Run[1].id = "rbxassetid://123456789"
</code></pre>
<p>Get R6 emotes:</p>
<pre><code class="language-lua">local r6Emotes = SimpleAnimate.getCopyOfAnimsList("R6", "Emotes")

-- Add custom emote
r6Emotes.customWave = {
    {
        id = "rbxassetid://987654321",
        weight = 10
    }
}
</code></pre>
<hr />
<h3 id="getcopyofanims-1"><a class="header" href="#getcopyofanims-1"><code>getCopyOfAnims()</code></a></h3>
<p>Gets deep copies of both default animation lists (Animations and Emotes).</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getCopyOfAnims(name: "R6" | "R15"): (AnimationsList, AnimationsList)
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>name</code> - The rig type ("R6" or "R15")</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList</code> - Core animations</li>
<li><code>AnimationsList</code> - Emote animations</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Get both R15 lists:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Customize both
coreAnims.Walk[1].speed = 1.2
emoteAnims.wave[1].fadeTime = 0.3

local controller = SimpleAnimate.new(character, true, coreAnims, emoteAnims)
</code></pre>
<p>Get R6 lists:</p>
<pre><code class="language-lua">local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R6")
</code></pre>
<hr />
<h3 id="getanimpackageasync-1"><a class="header" href="#getanimpackageasync-1"><code>getAnimPackageAsync()</code></a></h3>
<p>Gets a player's equipped animation package asynchronously. Fills in missing animations with defaults.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getAnimPackageAsync(
    player: Player?,
    defaultPoseSourceIfUnavailable: AnimationsList?
): AnimationsList?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>player</code> - The player (required when called from server, optional on client)</li>
<li><code>defaultPoseSourceIfUnavailable</code> - Fallback animations (defaults to R15)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList?</code> - The player's animation package with defaults filled in</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Server-side:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Get player's equipped animations
        local anims = SimpleAnimate.getAnimPackageAsync(player)
        
        local controller = SimpleAnimate.new(character, true, anims)
    end)
end)
</code></pre>
<p>Client-side:</p>
<pre><code class="language-lua">local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Get local player's animations (no player parameter needed)
local anims = SimpleAnimate.getAnimPackageAsync()

local controller = SimpleAnimate.new(character, true, anims)
</code></pre>
<p>With custom fallbacks:</p>
<pre><code class="language-lua">local customDefaults = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")
customDefaults.Idle[1].id = "rbxassetid://123456789"

local anims = SimpleAnimate.getAnimPackageAsync(player, customDefaults)
</code></pre>
<hr />
<h3 id="getemotepackageasync-1"><a class="header" href="#getemotepackageasync-1"><code>getEmotePackageAsync()</code></a></h3>
<p>Gets a player's equipped emote package asynchronously.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function getEmotePackageAsync(
    player: Player?,
    defaultEmoteSourceIfUnavailable: AnimationsList?
): AnimationsList?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>player</code> - The player (required when called from server)</li>
<li><code>defaultEmoteSourceIfUnavailable</code> - Fallback emotes (defaults to R15)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList?</code> - The player's emote package</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Server-side:</p>
<pre><code class="language-lua">Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local anims = SimpleAnimate.getAnimPackageAsync(player)
        local emotes = SimpleAnimate.getEmotePackageAsync(player)
        
        local controller = SimpleAnimate.new(
            character,
            true,
            anims,
            emotes
        )
    end)
end)
</code></pre>
<p>Client-side:</p>
<pre><code class="language-lua">local emotes = SimpleAnimate.getEmotePackageAsync()
</code></pre>
<h2 id="properties-1"><a class="header" href="#properties-1">Properties</a></h2>
<h3 id="preload-1"><a class="header" href="#preload-1"><code>Preload</code></a></h3>
<p>Reference to the Preload utility module.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-lua">local animator = character:FindFirstChildWhichIsA("Animator", true)
local animList = {
    Idle = {{id = "rbxassetid://123", weight = 10}}
}

local preloaded = SimpleAnimate.Preload.preloadAnimList(
    animator,
    animList,
    "core",
    Enum.AnimationPriority.Core,
    true
)
</code></pre>
<hr />
<h3 id="default-1"><a class="header" href="#default-1"><code>default</code></a></h3>
<p>Reference to default animation lists (DefaultAnims module).</p>
<p><strong>Example:</strong></p>
<pre><code class="language-lua">-- Access default R15 animations directly
local defaultR15 = SimpleAnimate.default.R15

print(defaultR15.Animations.Idle[1].id)
print(defaultR15.Emotes.wave[1].id)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="animationcontroller"><a class="header" href="#animationcontroller">AnimationController</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core"><a class="header" href="#core">Core</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="posecontroller-api"><a class="header" href="#posecontroller-api">PoseController API</a></h1>
<p>The PoseController manages pose transitions and core animation playback. It handles switching between different character states like idle, walking, running, jumping, etc.</p>
<p><strong>Access:</strong> <code>controller.Core.PoseController</code></p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="posechanged"><a class="header" href="#posechanged"><code>PoseChanged</code></a></h3>
<p>Fires when the character's pose changes.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">PoseChanged: RBXScriptSignal&lt;PoseType, PoseType, AnimationTrack&gt;
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>oldPose: PoseType</code> - The previous pose</li>
<li><code>newPose: PoseType</code> - The new pose</li>
<li><code>track: AnimationTrack</code> - The animation track for the new pose</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage:</p>
<pre><code class="language-lua">controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose, track)
    print(string.format("Changed from %s to %s", oldPose, newPose))
end)
</code></pre>
<p>Track specific transitions:</p>
<pre><code class="language-lua">controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose, track)
    if newPose == "Jumping" then
        print("Character jumped!")
        track:AdjustSpeed(1.5) -- Make jump animation faster
    elseif newPose == "Freefall" then
        print("Character is falling!")
    end
end)
</code></pre>
<p>Create visual effects on pose changes:</p>
<pre><code class="language-lua">controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose, track)
    if newPose == "Landed" then
        -- Create dust particle effect
        local dust = dustEffect:Clone()
        dust.Parent = character.HumanoidRootPart
        dust:Emit(20)
        
        task.delay(1, function()
            dust:Destroy()
        end)
    end
end)
</code></pre>
<h2 id="methods"><a class="header" href="#methods">Methods</a></h2>
<h3 id="setcoreactive"><a class="header" href="#setcoreactive"><code>:SetCoreActive()</code></a></h3>
<p>Sets whether core animations are active.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function SetCoreActive(value: boolean): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>value: boolean</code> - Enable/disable core animations</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Disable all core animations:</p>
<pre><code class="language-lua">controller.Core.PoseController:SetCoreActive(false)
-- Character will stop animating automatically
</code></pre>
<p>Re-enable core animations:</p>
<pre><code class="language-lua">controller.Core.PoseController:SetCoreActive(true)
</code></pre>
<p>Temporarily pause during cutscene:</p>
<pre><code class="language-lua">-- Start cutscene
controller.Core.PoseController:SetCoreActive(false)

-- Play cutscene...
task.wait(5)

-- Resume normal animations
controller.Core.PoseController:SetCoreActive(true)
</code></pre>
<hr />
<h3 id="getcoreactive"><a class="header" href="#getcoreactive"><code>:GetCoreActive()</code></a></h3>
<p>Gets whether core animations are currently active.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetCoreActive(): boolean
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>boolean</code> - Whether core animations are active</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local isActive = controller.Core.PoseController:GetCoreActive()
print("Core animations active:", isActive)
</code></pre>
<p>Toggle core animations:</p>
<pre><code class="language-lua">local currentState = controller.Core.PoseController:GetCoreActive()
controller.Core.PoseController:SetCoreActive(not currentState)
</code></pre>
<hr />
<h3 id="setcorecanplayanims"><a class="header" href="#setcorecanplayanims"><code>:SetCoreCanPlayAnims()</code></a></h3>
<p>Controls whether core animations can play. Used internally during emotes.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function SetCoreCanPlayAnims(value: boolean): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>value: boolean</code> - Whether core animations can play</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">-- Prevent core animations temporarily
controller.Core.PoseController:SetCoreCanPlayAnims(false)

-- Allow core animations
controller.Core.PoseController:SetCoreCanPlayAnims(true)
</code></pre>
<hr />
<h3 id="getcorecanplayanims"><a class="header" href="#getcorecanplayanims"><code>:GetCoreCanPlayAnims()</code></a></h3>
<p>Gets whether core animations can play.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetCoreCanPlayAnims(): boolean
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>boolean</code> - Whether core animations can play</li>
</ul>
<hr />
<h3 id="getcurrenttrack"><a class="header" href="#getcurrenttrack"><code>:GetCurrentTrack()</code></a></h3>
<p>Gets the currently playing animation track.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetCurrentTrack(): AnimationTrack
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - The current animation track</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local track = controller.Core.PoseController:GetCurrentTrack()
print("Current animation:", track.Animation.AnimationId)
print("Current speed:", track.Speed)
print("Is playing:", track.IsPlaying)
</code></pre>
<p>Adjust current animation speed:</p>
<pre><code class="language-lua">local track = controller.Core.PoseController:GetCurrentTrack()
track:AdjustSpeed(2) -- Play at 2x speed
</code></pre>
<hr />
<h3 id="getpose"><a class="header" href="#getpose"><code>:GetPose()</code></a></h3>
<p>Gets the current pose type.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetPose(): PoseType?
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>PoseType?</code> - The current pose (e.g., "Idle", "Walk", "Run", "Jumping")</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local currentPose = controller.Core.PoseController:GetPose()
print("Character is:", currentPose)
</code></pre>
<p>Conditional logic based on pose:</p>
<pre><code class="language-lua">local pose = controller.Core.PoseController:GetPose()

if pose == "Idle" then
    print("Character is standing still")
elseif pose == "Run" or pose == "Walk" then
    print("Character is moving")
elseif pose == "Freefall" or pose == "Jumping" then
    print("Character is in the air")
end
</code></pre>
<hr />
<h3 id="setposeenabled"><a class="header" href="#setposeenabled"><code>:SetPoseEnabled()</code></a></h3>
<p>Enables or disables a specific pose.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function SetPoseEnabled(pose: PoseType, enabled: boolean): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to enable/disable</li>
<li><code>enabled: boolean</code> - Whether the pose should be enabled</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Disable jumping animation:</p>
<pre><code class="language-lua">controller.Core.PoseController:SetPoseEnabled("Jumping", false)
-- Character can still jump but won't play jump animation
</code></pre>
<p>Disable multiple poses:</p>
<pre><code class="language-lua">-- Create a "statue" mode
controller.Core.PoseController:SetPoseEnabled("Walk", false)
controller.Core.PoseController:SetPoseEnabled("Run", false)
controller.Core.PoseController:SetPoseEnabled("Jumping", false)
</code></pre>
<p>Re-enable poses:</p>
<pre><code class="language-lua">controller.Core.PoseController:SetPoseEnabled("Jumping", true)
</code></pre>
<hr />
<h3 id="getcoreaniminfos"><a class="header" href="#getcoreaniminfos"><code>:GetCoreAnimInfos()</code></a></h3>
<p>Gets the animation information array for a specific pose.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetCoreAnimInfos(pose: PoseType): {AnimInfo}
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to get animations for</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{AnimInfo}</code> - Array of animation info structures</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local idleAnims = controller.Core.PoseController:GetCoreAnimInfos("Idle")

for i, info in idleAnims do
    print(string.format("Idle anim %d: %s (weight: %d)", i, info.id, info.weight))
end
</code></pre>
<p>Check how many walk animations exist:</p>
<pre><code class="language-lua">local walkAnims = controller.Core.PoseController:GetCoreAnimInfos("Walk")
print("Number of walk animations:", #walkAnims)
</code></pre>
<hr />
<h3 id="changecoreanim"><a class="header" href="#changecoreanim"><code>:ChangeCoreAnim()</code></a></h3>
<p>Changes a core animation for a specific pose.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function ChangeCoreAnim(
    pose: PoseType,
    index: number,
    new: Animation | string | AnimationTrack | AnimInfo
): AnimationTrack
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to change</li>
<li><code>index: number</code> - The index of the animation to change (1-based)</li>
<li><code>new</code> - The new animation (can be AnimInfo table, AnimationId string, Animation instance, or AnimationTrack)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - The new animation track</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Change using animation ID:</p>
<pre><code class="language-lua">controller.Core.PoseController:ChangeCoreAnim(
    "Idle",
    1,
    "rbxassetid://123456789"
)
</code></pre>
<p>Change using Animation instance:</p>
<pre><code class="language-lua">local anim = Instance.new("Animation")
anim.AnimationId = "rbxassetid://123456789"

controller.Core.PoseController:ChangeCoreAnim("Run", 1, anim)
</code></pre>
<p>Change using AnimInfo table:</p>
<pre><code class="language-lua">local newAnimInfo = {
    id = "rbxassetid://123456789",
    weight = 15,
    speed = 1.2,
    fadeTime = 0.3
}

controller.Core.PoseController:ChangeCoreAnim("Walk", 1, newAnimInfo)
</code></pre>
<p>Change multiple animations:</p>
<pre><code class="language-lua">-- Replace all idle animations
local idleAnims = {
    "rbxassetid://111111",
    "rbxassetid://222222",
    "rbxassetid://333333"
}

for i, animId in idleAnims do
    controller.Core.PoseController:ChangeCoreAnim("Idle", i, animId)
end
</code></pre>
<hr />
<h3 id="getrandomcoreanim"><a class="header" href="#getrandomcoreanim"><code>:GetRandomCoreAnim()</code></a></h3>
<p>Gets a random animation track for the specified pose, weighted by animation weights.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetRandomCoreAnim(pose: PoseType): AnimationTrack
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to get an animation for</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - A randomly selected animation track</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local randomIdle = controller.Core.PoseController:GetRandomCoreAnim("Idle")
print("Selected idle animation:", randomIdle.Animation.AnimationId)
</code></pre>
<hr />
<h3 id="stopcoreanimations"><a class="header" href="#stopcoreanimations"><code>:StopCoreAnimations()</code></a></h3>
<p>Stops all currently playing core animations.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function StopCoreAnimations(fadeTime: number?): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>fadeTime: number?</code> - Optional fade time for stopping animations (default: instant)</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Stop immediately:</p>
<pre><code class="language-lua">controller.Core.PoseController:StopCoreAnimations()
</code></pre>
<p>Stop with fade:</p>
<pre><code class="language-lua">controller.Core.PoseController:StopCoreAnimations(0.5) -- Fade out over 0.5 seconds
</code></pre>
<p>Use before playing custom animation:</p>
<pre><code class="language-lua">-- Stop all core animations before custom sequence
controller.Core.PoseController:StopCoreAnimations(0.2)

local customTrack = animator:LoadAnimation(customAnimation)
customTrack:Play()
</code></pre>
<hr />
<h3 id="playcoreanimation"><a class="header" href="#playcoreanimation"><code>:PlayCoreAnimation()</code></a></h3>
<p>Plays an animation for the specified pose.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function PlayCoreAnimation(
    pose: PoseType,
    looped: boolean?,
    speed: number?,
    fadeTime: number?
): AnimInfo
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to play</li>
<li><code>looped: boolean?</code> - Whether to loop (default: <code>true</code>)</li>
<li><code>speed: number?</code> - Playback speed (default: <code>1</code>)</li>
<li><code>fadeTime: number?</code> - Fade time for transition (default: <code>0.1</code>)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimInfo</code> - The animation info that was played</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Play idle animation:</p>
<pre><code class="language-lua">controller.Core.PoseController:PlayCoreAnimation("Idle")
</code></pre>
<p>Play with custom speed:</p>
<pre><code class="language-lua">controller.Core.PoseController:PlayCoreAnimation("Run", true, 1.5)
</code></pre>
<p>Play non-looping:</p>
<pre><code class="language-lua">controller.Core.PoseController:PlayCoreAnimation("Jumping", false, 1, 0.1)
</code></pre>
<hr />
<h3 id="changepose"><a class="header" href="#changepose"><code>:ChangePose()</code></a></h3>
<p>Changes the character's pose.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function ChangePose(pose: PoseType, speed: number?, isCore: boolean?): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pose: PoseType</code> - The pose to change to</li>
<li><code>speed: number?</code> - Optional playback speed (default: <code>1</code>)</li>
<li><code>isCore: boolean?</code> - Whether this is a core pose change (default: <code>false</code>)</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Force character to idle:</p>
<pre><code class="language-lua">controller.Core.PoseController:ChangePose("Idle")
</code></pre>
<p>Change pose with custom speed:</p>
<pre><code class="language-lua">controller.Core.PoseController:ChangePose("Walk", 1.5)
</code></pre>
<p><strong>Note:</strong> Usually you don't need to call this manually as the Connections module handles pose changes automatically based on humanoid state.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="connections-api"><a class="header" href="#connections-api">Connections API</a></h1>
<p>The Connections module handles humanoid event connections and automatic pose changes based on character state. It responds to movement, jumping, climbing, swimming, and other state changes.</p>
<p><strong>Access:</strong> <code>controller.Core.Connections</code></p>
<h2 id="properties-2"><a class="header" href="#properties-2">Properties</a></h2>
<h3 id="configuration-properties"><a class="header" href="#configuration-properties">Configuration Properties</a></h3>
<p>These properties control animation behavior and speed multipliers:</p>
<ul>
<li><code>JumpDuration: number</code> - Duration before falling animation plays (default: <code>0.2</code>)</li>
<li><code>SwimIdleAnimationSpeed: number</code> - Speed for swim idle animation (default: <code>1</code>)</li>
<li><code>IdleAnimationSpeed: number</code> - Speed for idle animation (default: <code>1</code>)</li>
<li><code>RunThreshold: number</code> - Speed threshold between walk and run (default: <code>15.5</code>)</li>
<li><code>SwimIdleThreshold: number</code> - Speed threshold for swim idle vs swimming (default: <code>2</code>)</li>
<li><code>MoveAnimationSpeedMultiplier: number</code> - Multiplier for walk/run animations (default: <code>1</code>)</li>
<li><code>ClimbAnimationSpeedMultiplier: number</code> - Multiplier for climb animations (default: <code>1</code>)</li>
<li><code>SwimAnimationSpeedMultiplier: number</code> - Multiplier for swim animations (default: <code>1</code>)</li>
<li><code>WalkSpeed: number</code> - Reference walk speed (default: humanoid's WalkSpeed)</li>
<li><code>AutoAdjustSpeedMultipliers: boolean</code> - Automatically adjust multipliers based on WalkSpeed (default: <code>true</code>)</li>
<li><code>UseWalkSpeedForAnimSpeed: boolean</code> - Use WalkSpeed for animation speed calculations (default: <code>true</code>)</li>
</ul>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="adjusting-run-threshold"><a class="header" href="#adjusting-run-threshold">Adjusting Run Threshold</a></h3>
<p>Control when the character switches from walking to running:</p>
<pre><code class="language-lua">-- Default is 15.5, lower value = switches to run earlier
controller.Core.Connections.RunThreshold = 10

-- Now character will run at speeds above 10
</code></pre>
<h3 id="custom-animation-speeds"><a class="header" href="#custom-animation-speeds">Custom Animation Speeds</a></h3>
<pre><code class="language-lua">-- Make idle animation slower for dramatic effect
controller.Core.Connections.IdleAnimationSpeed = 0.7

-- Make running animation faster
controller.Core.Connections.MoveAnimationSpeedMultiplier = 1.5
</code></pre>
<h3 id="adjusting-jump-timing"><a class="header" href="#adjusting-jump-timing">Adjusting Jump Timing</a></h3>
<pre><code class="language-lua">-- Make character fall faster (shorter jump animation)
controller.Core.Connections.JumpDuration = 0.1

-- Make character stay in jump animation longer
controller.Core.Connections.JumpDuration = 0.5
</code></pre>
<h3 id="manual-speed-multipliers"><a class="header" href="#manual-speed-multipliers">Manual Speed Multipliers</a></h3>
<p>Disable auto-adjustment and set custom multipliers:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Disable automatic adjustment
connections.AutoAdjustSpeedMultipliers = false

-- Set custom multipliers
connections.MoveAnimationSpeedMultiplier = 2.0   -- Walk/run at 2x speed
connections.ClimbAnimationSpeedMultiplier = 1.5  -- Climb at 1.5x speed
connections.SwimAnimationSpeedMultiplier = 0.8   -- Swim at 0.8x speed
</code></pre>
<h3 id="swimming-configuration"><a class="header" href="#swimming-configuration">Swimming Configuration</a></h3>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Adjust swim idle threshold
connections.SwimIdleThreshold = 3 -- Idle when speed &lt; 3

-- Adjust swim idle animation speed
connections.SwimIdleAnimationSpeed = 0.5 -- Slower treading water

-- Adjust swimming animation speed
connections.SwimAnimationSpeedMultiplier = 1.2
</code></pre>
<h3 id="speed-based-animation-system"><a class="header" href="#speed-based-animation-system">Speed-Based Animation System</a></h3>
<p>Create a system where animation speed matches character speed:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Enable speed-based animation
connections.UseWalkSpeedForAnimSpeed = true
connections.AutoAdjustSpeedMultipliers = true

-- Update walk speed reference
local humanoid = character:FindFirstChildWhichIsA("Humanoid")

humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
    connections.WalkSpeed = humanoid.WalkSpeed
end)
</code></pre>
<h3 id="custom-speed-zones"><a class="header" href="#custom-speed-zones">Custom Speed Zones</a></h3>
<p>Create areas with different animation behaviors:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

local slowZone = workspace.SlowZone
local fastZone = workspace.FastZone

slowZone.Touched:Connect(function(hit)
    if hit.Parent == character then
        -- Slow down animations in this zone
        connections.MoveAnimationSpeedMultiplier = 0.5
        connections.ClimbAnimationSpeedMultiplier = 0.5
    end
end)

fastZone.Touched:Connect(function(hit)
    if hit.Parent == character then
        -- Speed up animations in this zone
        connections.MoveAnimationSpeedMultiplier = 2.0
        connections.ClimbAnimationSpeedMultiplier = 2.0
    end
end)
</code></pre>
<h3 id="dynamic-animation-speed"><a class="header" href="#dynamic-animation-speed">Dynamic Animation Speed</a></h3>
<p>Adjust animation speed based on game state:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Normal mode
local function setNormalSpeed()
    connections.MoveAnimationSpeedMultiplier = 1.0
    connections.IdleAnimationSpeed = 1.0
end

-- Combat mode - faster, more alert animations
local function setCombatSpeed()
    connections.MoveAnimationSpeedMultiplier = 1.3
    connections.IdleAnimationSpeed = 1.2
end

-- Exhausted mode - slower animations
local function setExhaustedSpeed()
    connections.MoveAnimationSpeedMultiplier = 0.7
    connections.IdleAnimationSpeed = 0.8
end

-- Switch modes based on stamina
local stamina = 100

game:GetService("RunService").Heartbeat:Connect(function()
    if stamina &gt; 50 then
        setNormalSpeed()
    elseif stamina &gt; 20 then
        setCombatSpeed()
    else
        setExhaustedSpeed()
    end
end)
</code></pre>
<h3 id="disable-auto-speed-adjustment"><a class="header" href="#disable-auto-speed-adjustment">Disable Auto-Speed Adjustment</a></h3>
<p>For more control, disable automatic speed calculations:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Disable auto-adjustment
connections.AutoAdjustSpeedMultipliers = false
connections.UseWalkSpeedForAnimSpeed = false

-- Now multipliers won't change automatically
-- Set them manually as needed
connections.MoveAnimationSpeedMultiplier = 1.5
</code></pre>
<h3 id="custom-thresholds-for-different-characters"><a class="header" href="#custom-thresholds-for-different-characters">Custom Thresholds for Different Characters</a></h3>
<pre><code class="language-lua">-- Heavy character - slower threshold
local heavyConnections = heavyController.Core.Connections
heavyConnections.RunThreshold = 12
heavyConnections.MoveAnimationSpeedMultiplier = 0.8

-- Light character - faster threshold  
local lightConnections = lightController.Core.Connections
lightConnections.RunThreshold = 18
lightConnections.MoveAnimationSpeedMultiplier = 1.2
</code></pre>
<h3 id="monitoring-animation-state"><a class="header" href="#monitoring-animation-state">Monitoring Animation State</a></h3>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Check current settings
print("Run Threshold:", connections.RunThreshold)
print("Move Speed Multiplier:", connections.MoveAnimationSpeedMultiplier)
print("Auto Adjust:", connections.AutoAdjustSpeedMultipliers)

-- Monitor changes
task.spawn(function()
    while true do
        task.wait(1)
        print("Current speed multiplier:", connections.MoveAnimationSpeedMultiplier)
    end
end)
</code></pre>
<h3 id="complete-movement-system"><a class="header" href="#complete-movement-system">Complete Movement System</a></h3>
<p>A comprehensive example combining multiple settings:</p>
<pre><code class="language-lua">local connections = controller.Core.Connections

-- Configure all movement settings
connections.RunThreshold = 14
connections.SwimIdleThreshold = 2.5
connections.JumpDuration = 0.25

-- Configure animation speeds
connections.IdleAnimationSpeed = 1.0
connections.SwimIdleAnimationSpeed = 0.8

-- Configure multipliers
connections.AutoAdjustSpeedMultipliers = true
connections.UseWalkSpeedForAnimSpeed = true

-- Set base walk speed
connections.WalkSpeed = character.Humanoid.WalkSpeed

-- Create speed boost power-up
local function applySpeedBoost(duration)
    local originalMultiplier = connections.MoveAnimationSpeedMultiplier
    
    connections.MoveAnimationSpeedMultiplier = 2.0
    connections.AutoAdjustSpeedMultipliers = false
    
    task.delay(duration, function()
        connections.MoveAnimationSpeedMultiplier = originalMultiplier
        connections.AutoAdjustSpeedMultipliers = true
    end)
end

-- Use it
applySpeedBoost(5) -- 5 second speed boost
</code></pre>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<ul>
<li>The Connections module automatically updates itself based on humanoid events</li>
<li>Most users won't need to modify these properties unless they want custom animation behavior</li>
<li>Changes to these properties take effect immediately</li>
<li><code>AutoAdjustSpeedMultipliers</code> recalculates multipliers every frame based on WalkSpeed</li>
<li>Setting <code>AutoAdjustSpeedMultipliers</code> to <code>false</code> gives you full manual control</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="action-api"><a class="header" href="#action-api">Action API</a></h1>
<p>The Action module manages emotes and custom action animations. It handles one-off animations that interrupt core animations temporarily.</p>
<p><strong>Access:</strong> <code>controller.Action</code></p>
<h2 id="methods-1"><a class="header" href="#methods-1">Methods</a></h2>
<h3 id="createaction"><a class="header" href="#createaction"><code>:CreateAction()</code></a></h3>
<p>Creates a new action animation and adds it to the actions collection.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function CreateAction(
    key: any,
    template: {AnimInfo},
    doPreload: boolean?,
    priority: Enum.AnimationPriority?,
    looped: boolean?
): {AnimInfo}
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key identifier for the action (can be string, number, etc.)</li>
<li><code>template: {AnimInfo}</code> - Array of animation info structures</li>
<li><code>doPreload: boolean?</code> - Whether to preload animations (default: <code>true</code>)</li>
<li><code>priority: Enum.AnimationPriority?</code> - Animation priority (default: <code>Enum.AnimationPriority.Action</code>)</li>
<li><code>looped: boolean?</code> - Whether animations loop (default: <code>false</code>)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{AnimInfo}</code> - The preloaded/created animation info array</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Create a simple action:</p>
<pre><code class="language-lua">local waveAction = {
    {
        id = "rbxassetid://123456789",
        weight = 10,
        speed = 1,
        fadeTime = 0.2
    }
}

controller.Action:CreateAction("customWave", waveAction)
</code></pre>
<p>Create action with multiple variants:</p>
<pre><code class="language-lua">local danceAction = {
    {
        id = "rbxassetid://111111111",
        weight = 10,
        speed = 1
    },
    {
        id = "rbxassetid://222222222",
        weight = 5, -- Less likely to be selected
        speed = 1.2
    },
    {
        id = "rbxassetid://333333333",
        weight = 15, -- Most likely to be selected
        speed = 0.9
    }
}

controller.Action:CreateAction("dance", danceAction)
</code></pre>
<p>Create with custom priority:</p>
<pre><code class="language-lua">controller.Action:CreateAction(
    "importantAction",
    actionTemplate,
    true,
    Enum.AnimationPriority.Action4 -- Higher priority
)
</code></pre>
<p>Create looped action:</p>
<pre><code class="language-lua">local sitAction = {
    {
        id = "rbxassetid://987654321",
        weight = 10
    }
}

controller.Action:CreateAction("sit", sitAction, true, nil, true) -- Looped
</code></pre>
<hr />
<h3 id="bulkcreateaction"><a class="header" href="#bulkcreateaction"><code>:BulkCreateAction()</code></a></h3>
<p>Creates multiple actions at once from an animations list.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function BulkCreateAction(
    animsList: AnimationsList,
    doPreload: boolean?,
    priority: Enum.AnimationPriority?
): AnimationsList
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>animsList: AnimationsList</code> - Dictionary of action names to animation arrays</li>
<li><code>doPreload: boolean?</code> - Whether to preload animations (default: <code>true</code>)</li>
<li><code>priority: Enum.AnimationPriority?</code> - Animation priority (default: <code>Enum.AnimationPriority.Action</code>)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationsList</code> - The created animations list</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Create multiple actions at once:</p>
<pre><code class="language-lua">local customActions = {
    wave = {
        {id = "rbxassetid://111", weight = 10}
    },
    dance = {
        {id = "rbxassetid://222", weight = 10},
        {id = "rbxassetid://333", weight = 5}
    },
    point = {
        {id = "rbxassetid://444", weight = 10}
    }
}

controller.Action:BulkCreateAction(customActions)

-- Now you can play any of them
controller.Action:PlayAction("wave")
controller.Action:PlayAction("dance")
controller.Action:PlayAction("point")
</code></pre>
<hr />
<h3 id="removeaction"><a class="header" href="#removeaction"><code>:RemoveAction()</code></a></h3>
<p>Removes and destroys an action by key.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function RemoveAction(key: any): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action to remove</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">-- Remove an action
controller.Action:RemoveAction("customWave")

-- Action is now destroyed and can't be played
</code></pre>
<p>Remove multiple actions:</p>
<pre><code class="language-lua">local actionsToRemove = {"action1", "action2", "action3"}

for _, actionKey in actionsToRemove do
    controller.Action:RemoveAction(actionKey)
end
</code></pre>
<hr />
<h3 id="stopallactions"><a class="header" href="#stopallactions"><code>:StopAllActions()</code></a></h3>
<p>Stops all currently playing animations for a specific action.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function StopAllActions(key: any): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action to stop</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">-- Stop all dance animations
controller.Action:StopAllActions("dance")
</code></pre>
<p>Stop action after delay:</p>
<pre><code class="language-lua">controller.Action:PlayAction("dance")

task.delay(3, function()
    controller.Action:StopAllActions("dance")
end)
</code></pre>
<hr />
<h3 id="getaction"><a class="header" href="#getaction"><code>:GetAction()</code></a></h3>
<p>Gets an action's animation info array by key.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetAction(key: any): {AnimInfo}?
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action to get</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>{AnimInfo}?</code> - The animation info array or <code>nil</code> if not found</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local waveInfo = controller.Action:GetAction("wave")

if waveInfo then
    print("Wave action has", #waveInfo, "animations")
    
    for i, info in waveInfo do
        print(string.format("Animation %d: %s (weight: %d)", i, info.id, info.weight))
    end
end
</code></pre>
<p>Check if action exists:</p>
<pre><code class="language-lua">if controller.Action:GetAction("customAction") then
    print("Custom action exists!")
else
    print("Custom action not found")
end
</code></pre>
<hr />
<h3 id="getrandomactionanim"><a class="header" href="#getrandomactionanim"><code>:GetRandomActionAnim()</code></a></h3>
<p>Gets a random animation track from an action's animations using weighted selection.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function GetRandomActionAnim(key: any): AnimationTrack
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - A randomly selected animation track</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local danceTrack = controller.Action:GetRandomActionAnim("dance")
print("Selected animation:", danceTrack.Animation.AnimationId)

-- Play it manually
danceTrack:Play()
</code></pre>
<hr />
<h3 id="playrandomactionanim"><a class="header" href="#playrandomactionanim"><code>:PlayRandomActionAnim()</code></a></h3>
<p>Plays a random animation from an action and returns the track.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function PlayRandomActionAnim(key: any): AnimationTrack
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action to play</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - The animation track that was played</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Basic usage:</p>
<pre><code class="language-lua">local track = controller.Action:PlayRandomActionAnim("wave")
</code></pre>
<p>Wait for animation to finish:</p>
<pre><code class="language-lua">local track = controller.Action:PlayRandomActionAnim("dance")

track.Stopped:Wait()
print("Dance finished!")
</code></pre>
<p>Play with custom adjustments:</p>
<pre><code class="language-lua">local track = controller.Action:PlayRandomActionAnim("emote")
track:AdjustSpeed(1.5) -- Speed up
track:AdjustWeight(2)  -- Increase weight
</code></pre>
<p>Chain animations:</p>
<pre><code class="language-lua">local function playEmoteSequence()
    local wave = controller.Action:PlayRandomActionAnim("wave")
    wave.Stopped:Wait()
    
    task.wait(0.5)
    
    local dance = controller.Action:PlayRandomActionAnim("dance")
    dance.Stopped:Wait()
    
    task.wait(0.5)
    
    local point = controller.Action:PlayRandomActionAnim("point")
end

playEmoteSequence()
</code></pre>
<hr />
<h3 id="playaction"><a class="header" href="#playaction"><code>:PlayAction()</code></a></h3>
<p>Shorter alias for <code>:PlayRandomActionAnim()</code>.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function PlayAction(key: any): AnimationTrack
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>key: any</code> - The key of the action to play</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>AnimationTrack</code> - The animation track that was played</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">-- These are equivalent
local track1 = controller.Action:PlayAction("wave")
local track2 = controller.Action:PlayRandomActionAnim("wave")
</code></pre>
<p>Quick emote playing:</p>
<pre><code class="language-lua">-- Play various emotes
controller.Action:PlayAction("wave")
task.wait(2)
controller.Action:PlayAction("dance")
task.wait(2)
controller.Action:PlayAction("point")
</code></pre>
<hr />
<h3 id="setemotebindable"><a class="header" href="#setemotebindable"><code>:SetEmoteBindable()</code></a></h3>
<p>Sets up the emote bindable function for handling emote requests. This is used internally to connect with Roblox's emote system.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-lua">function SetEmoteBindable(e: BindableFunction): ()
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>e: BindableFunction</code> - The bindable function to set up</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-lua">local emoteBindable = Instance.new("BindableFunction")
controller.Action:SetEmoteBindable(emoteBindable)

-- Now the emote system is connected
-- Players can use the emote menu to trigger animations
</code></pre>
<p>Custom emote handler:</p>
<pre><code class="language-lua">local emoteBindable = Instance.new("BindableFunction")
controller.Action:SetEmoteBindable(emoteBindable)

-- Monitor emote usage
local originalInvoke = emoteBindable.OnInvoke

function emoteBindable.OnInvoke(emoteName)
    print(player.Name, "played emote:", emoteName)
    return originalInvoke(emoteName)
end
</code></pre>
<h2 id="complete-examples"><a class="header" href="#complete-examples">Complete Examples</a></h2>
<h3 id="custom-emote-system"><a class="header" href="#custom-emote-system">Custom Emote System</a></h3>
<pre><code class="language-lua">-- Define custom emotes
local customEmotes = {
    wave = {
        {id = "rbxassetid://111", weight = 10, fadeTime = 0.2}
    },
    dance1 = {
        {id = "rbxassetid://222", weight = 10, fadeTime = 0.3}
    },
    dance2 = {
        {id = "rbxassetid://333", weight = 10, fadeTime = 0.3}
    },
    sit = {
        {id = "rbxassetid://444", weight = 10, fadeTime = 0.5}
    }
}

-- Create all emotes
controller.Action:BulkCreateAction(customEmotes)

-- Create UI buttons to trigger emotes
local function createEmoteButton(emoteName)
    local button = Instance.new("TextButton")
    button.Text = emoteName
    button.MouseButton1Click:Connect(function()
        controller.Action:PlayAction(emoteName)
    end)
    return button
end

for emoteName in customEmotes do
    local button = createEmoteButton(emoteName)
    button.Parent = emoteGui
end
</code></pre>
<h3 id="timed-actions"><a class="header" href="#timed-actions">Timed Actions</a></h3>
<pre><code class="language-luau">-- Create a timed buff action
local buffAction = {
    {id = "rbxassetid://555", weight = 10}
}

controller.Action:CreateAction("buff", buffAction, true, nil, true) -- Looped

-- Play buff animation for 10 seconds
controller.Action:PlayAction("buff")

task.delay(10, function()
    controller.Action:StopAction("buff")
end)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-animations-guide"><a class="header" href="#custom-animations-guide">Custom Animations Guide</a></h1>
<p>This guide covers how to use custom animations with SimpleAnimate.</p>
<h2 id="animation-info-structure"><a class="header" href="#animation-info-structure">Animation Info Structure</a></h2>
<p>All animations in SimpleAnimate are defined using the <code>AnimInfo</code> structure:</p>
<pre><code class="language-lua">{
    id = "rbxassetid://123456789", -- Animation asset ID
    weight = 10,                    -- Selection weight (default: 10)
    speed = 1,                      -- Playback speed (default: 1)
    fadeTime = 0.1,                 -- Fade in time (default: 0.1)
    stopFadeTime = 0.1             -- Fade out time (optional)
}
</code></pre>
<h2 id="creating-custom-core-animations"><a class="header" href="#creating-custom-core-animations">Creating Custom Core Animations</a></h2>
<h3 id="method-1-modify-default-animations"><a class="header" href="#method-1-modify-default-animations">Method 1: Modify Default Animations</a></h3>
<p>Start with default animations and modify them:</p>
<pre><code class="language-lua">local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

-- Get a copy of R15 animations
local coreAnims, emoteAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Replace idle animation
coreAnims.Idle = {
    {
        id = "rbxassetid://YOUR_IDLE_ANIM",
        weight = 10,
        fadeTime = 0.2
    }
}

-- Replace walk animation
coreAnims.Walk = {
    {
        id = "rbxassetid://YOUR_WALK_ANIM",
        weight = 10
    }
}

-- Create controller with custom animations
local controller = SimpleAnimate.new(character, true, coreAnims, emoteAnims)
</code></pre>
<h3 id="method-2-build-from-scratch"><a class="header" href="#method-2-build-from-scratch">Method 2: Build From Scratch</a></h3>
<p>Create a complete animation set from scratch:</p>
<pre><code class="language-lua">local customCoreAnims = {
    Idle = {
        {id = "rbxassetid://123", weight = 10, fadeTime = 0.1}
    },
    Walk = {
        {id = "rbxassetid://124", weight = 10}
    },
    Run = {
        {id = "rbxassetid://125", weight = 10}
    },
    Jump = {
        {id = "rbxassetid://126", weight = 10}
    },
    Fall = {
        {id = "rbxassetid://127", weight = 10}
    },
    Climb = {
        {id = "rbxassetid://128", weight = 10}
    },
    Sit = {
        {id = "rbxassetid://129", weight = 10}
    }
}

local controller = SimpleAnimate.new(character, true, customCoreAnims)
</code></pre>
<h2 id="multiple-animation-variants"><a class="header" href="#multiple-animation-variants">Multiple Animation Variants</a></h2>
<p>Add multiple variants of the same animation with different weights:</p>
<pre><code class="language-lua">local coreAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Multiple idle animations
coreAnims.Idle = {
    {
        id = "rbxassetid://IDLE_1",
        weight = 10,  -- Common idle
        fadeTime = 0.2
    },
    {
        id = "rbxassetid://IDLE_2",
        weight = 3,   -- Rare idle (stretching)
        fadeTime = 0.3
    },
    {
        id = "rbxassetid://IDLE_3",
        weight = 2,   -- Very rare idle (looking around)
        fadeTime = 0.3
    }
}

-- Multiple run animations
coreAnims.Run = {
    {
        id = "rbxassetid://RUN_NORMAL",
        weight = 10,
        speed = 1.0
    },
    {
        id = "rbxassetid://RUN_URGENT",
        weight = 5,
        speed = 1.2
    }
}
</code></pre>
<h2 id="animation-speed-control"><a class="header" href="#animation-speed-control">Animation Speed Control</a></h2>
<p>Control playback speed for different effects:</p>
<pre><code class="language-lua">local coreAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Slow idle for tired character
coreAnims.Idle[1].speed = 0.7

-- Fast run for energetic character
coreAnims.Run[1].speed = 1.3

-- Slow climb for heavy character
coreAnims.Climb[1].speed = 0.8
</code></pre>
<h2 id="fade-time-customization"><a class="header" href="#fade-time-customization">Fade Time Customization</a></h2>
<p>Control how animations blend together:</p>
<pre><code class="language-lua">local coreAnims = SimpleAnimate.getCopyOfAnims("R15")

-- Quick transition for responsive movement
coreAnims.Walk[1].fadeTime = 0.05

-- Smooth transition for idle
coreAnims.Idle[1].fadeTime = 0.3
coreAnims.Idle[1].stopFadeTime = 0.3

-- Instant jump
coreAnims.Jump[1].fadeTime = 0
</code></pre>
<h2 id="runtime-animation-changes"><a class="header" href="#runtime-animation-changes">Runtime Animation Changes</a></h2>
<p>Change animations while the game is running:</p>
<pre><code class="language-lua">-- Change a single animation
controller.Core.PoseController:ChangeCoreAnim(
    "Idle",
    1,
    "rbxassetid://NEW_IDLE_ANIM"
)

-- The new animation will play immediately if character is idle
</code></pre>
<p>Change with AnimInfo for more control:</p>
<pre><code class="language-luau">controller.Core.PoseController:ChangeCoreAnim(
    "Run",
    1,
    {
        id = "rbxassetid://NEW_RUN",
        weight = 10,
        speed = 1.2,
        fadeTime = 0.1
    }
)
</code></pre>
<h2 id="character-specific-animations"><a class="header" href="#character-specific-animations">Character-Specific Animations</a></h2>
<p>Different animations for different character types:</p>
<pre><code class="language-lua">local function getAnimationsForCharacter(characterType)
    if characterType == "Warrior" then
        return {
            Idle = {{id = "rbxassetid://WARRIOR_IDLE", weight = 10}},
            Walk = {{id = "rbxassetid://WARRIOR_WALK", weight = 10}},
            Run = {{id = "rbxassetid://WARRIOR_RUN", weight = 10}}
        }
    elseif characterType == "Mage" then
        return {
            Idle = {{id = "rbxassetid://MAGE_IDLE", weight = 10}},
            Walk = {{id = "rbxassetid://MAGE_WALK", weight = 10}},
            Run = {{id = "rbxassetid://MAGE_RUN", weight = 10}}
        }
    else
        return SimpleAnimate.getCopyOfAnims("R15")
    end
end

-- Usage
local characterType = player:GetAttribute("CharacterType")
local anims = getAnimationsForCharacter(characterType)
local controller = SimpleAnimate.new(character, true, anims)
</code></pre>
<h2 id="conditional-animation-system"><a class="header" href="#conditional-animation-system">Conditional Animation System</a></h2>
<p>Change animations based on game state:</p>
<pre><code class="language-luau">local controller = SimpleAnimate.new(character)

-- Normal animations
local normalAnims = {
    Idle = {{id = "rbxassetid://NORMAL_IDLE", weight = 10}},
    Walk = {{id = "rbxassetid://NORMAL_WALK", weight = 10}}
}

-- Combat animations
local combatAnims = {
    Idle = {{id = "rbxassetid://COMBAT_IDLE", weight = 10}},
    Walk = {{id = "rbxassetid://COMBAT_WALK", weight = 10}}
}

-- Switch to combat mode
local function enterCombat()
    for pose, anims in combatAnims do
        controller.Core.PoseController:ChangeCoreAnim(pose, 1, anims[1])
    end
end

-- Switch to normal mode
local function exitCombat()
    for pose, anims in normalAnims do
        controller.Core.PoseController:ChangeCoreAnim(pose, 1, anims[1])
    end
end

-- Use in game
player:GetAttributeChangedSignal("InCombat"):Connect(function()
    if player:GetAttribute("InCombat") then
        enterCombat()
    else
        exitCombat()
    end
end)
</code></pre>
<h2 id="animation-sets-system"><a class="header" href="#animation-sets-system">Animation Sets System</a></h2>
<p>Create a reusable animation sets system:</p>
<pre><code class="language-luau">local AnimationSets = {}

AnimationSets.Default = SimpleAnimate.getCopyOfAnims("R15")

AnimationSets.Zombie = {
    Idle = {{id = "rbxassetid://ZOMBIE_IDLE", weight = 10, speed = 0.7}},
    Walk = {{id = "rbxassetid://ZOMBIE_WALK", weight = 10, speed = 0.6}},
    Run = {{id = "rbxassetid://ZOMBIE_RUN", weight = 10, speed = 0.8}}
}

AnimationSets.Robot = {
    Idle = {{id = "rbxassetid://ROBOT_IDLE", weight = 10}},
    Walk = {{id = "rbxassetid://ROBOT_WALK", weight = 10, speed = 1.1}},
    Run = {{id = "rbxassetid://ROBOT_RUN", weight = 10, speed = 1.2}}
}

-- Apply animation set
local function applyAnimationSet(controller, setName)
    local animSet = AnimationSets[setName]
    
    for pose, anims in animSet do
        controller.Core.PoseController:ChangeCoreAnim(pose, 1, anims[1])
    end
end

-- Usage
local controller = SimpleAnimate.new(character)
applyAnimationSet(controller, "Zombie")
</code></pre>
<h2 id="mixing-player-and-custom-animations"><a class="header" href="#mixing-player-and-custom-animations">Mixing Player and Custom Animations</a></h2>
<p>Use player's animations but override specific poses:</p>
<pre><code class="language-luau">-- Get player's animations
local playerAnims = SimpleAnimate.getAnimPackageAsync(player)

-- Override specific animations with custom ones
playerAnims.Idle = {
    {id = "rbxassetid://CUSTOM_IDLE", weight = 10}
}

playerAnims.Run = {
    {id = "rbxassetid://CUSTOM_RUN", weight = 10}
}

-- Create controller with mixed animations
local controller = SimpleAnimate.new(character, true, playerAnims)
</code></pre>
<h2 id="animation-preloading"><a class="header" href="#animation-preloading">Animation Preloading</a></h2>
<p>Control when animations are loaded:</p>
<pre><code class="language-luau">-- Preload immediately (default)
local controller1 = SimpleAnimate.new(character, true, customAnims)

-- Don't preload (load on-demand)
local controller2 = SimpleAnimate.new(character, false, customAnims)

-- Manual preloading
local animator = character:FindFirstChildWhichIsA("Animator", true)
local preloadedAnims = SimpleAnimate.Preload.preloadAnimList(
    animator,
    customAnims,
    "core",
    Enum.AnimationPriority.Core,
    true
)

local controller3 = SimpleAnimate.new(character, false, preloadedAnims)
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ol>
<li><strong>Always provide fallbacks</strong>: Include all required poses even if using defaults</li>
<li><strong>Test weight distributions</strong>: Higher weights = more frequent selection</li>
<li><strong>Consider fade times</strong>: Smooth transitions improve animation quality</li>
<li><strong>Use appropriate speeds</strong>: Match animation speed to character movement</li>
<li><strong>Organize animation IDs</strong>: Keep animation IDs in a centralized configuration</li>
<li><strong>Test variants</strong>: Multiple animation variants add life to characters</li>
<li><strong>Profile performance</strong>: Too many variants can impact performance</li>
</ol>
<h2 id="example-complete-custom-system"><a class="header" href="#example-complete-custom-system">Example: Complete Custom System</a></h2>
<pre><code class="language-luau">local AnimationConfig = {
    HeavyWarrior = {
        Idle = {
            {id = "rbxassetid://001", weight = 10, speed = 0.8, fadeTime = 0.3}
        },
        Walk = {
            {id = "rbxassetid://002", weight = 10, speed = 0.9}
        },
        Run = {
            {id = "rbxassetid://003", weight = 10, speed = 0.85}
        },
        Jump = {
            {id = "rbxassetid://004", weight = 10, speed = 0.7}
        }
    },
    LightRogue = {
        Idle = {
            {id = "rbxassetid://101", weight = 8, speed = 1.1},
            {id = "rbxassetid://102", weight = 2, speed = 1.0} -- Rare variant
        },
        Walk = {
            {id = "rbxassetid://103", weight = 10, speed = 1.2}
        },
        Run = {
            {id = "rbxassetid://104", weight = 10, speed = 1.3}
        },
        Jump = {
            {id = "rbxassetid://105", weight = 10, speed = 1.2}
        }
    }
}

-- Create character with appropriate animations
local function createCharacter(player, class)
    player.CharacterAdded:Connect(function(character)
        local anims = AnimationConfig[class]
        local controller = SimpleAnimate.new(character, true, anims)
        
        print(player.Name, "loaded as", class)
    end)
end

createCharacter(player, "HeavyWarrior")
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="working-with-emotes"><a class="header" href="#working-with-emotes">Working with Emotes</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-machines-guide"><a class="header" href="#state-machines-guide">State Machines Guide</a></h1>
<p>This guide covers how to use custom state machines with SimpleAnimate instead of the default Humanoid.</p>
<h2 id="what-is-a-state-machine"><a class="header" href="#what-is-a-state-machine">What is a State Machine?</a></h2>
<p>A state machine in SimpleAnimate is any object that provides the same events and properties as a Humanoid:</p>
<ul>
<li><code>Running</code> event</li>
<li><code>Jumping</code> event</li>
<li><code>Climbing</code> event</li>
<li><code>Swimming</code> event</li>
<li><code>StateChanged</code> event</li>
<li><code>WalkSpeed</code> property</li>
</ul>
<p>By default, SimpleAnimate uses the character's Humanoid, but you can provide a custom state machine for:</p>
<ul>
<li>Custom character controllers</li>
<li>Non-humanoid characters</li>
<li>Special movement systems</li>
<li>Network-replicated animation states</li>
</ul>
<h2 id="required-interface"><a class="header" href="#required-interface">Required Interface</a></h2>
<p>Your custom state machine must implement:</p>
<pre><code class="language-lua">type StateMachine = {
    Running: RBXScriptSignal&lt;number&gt;,      -- Fires with speed
    Jumping: RBXScriptSignal&lt;()&gt;,          -- Fires on jump
    Climbing: RBXScriptSignal&lt;number&gt;,     -- Fires with climb speed
    Swimming: RBXScriptSignal&lt;number&gt;,     -- Fires with swim speed
    StateChanged: RBXScriptSignal&lt;Enum.HumanoidStateType, Enum.HumanoidStateType&gt;,
    WalkSpeed: number
}
</code></pre>
<h2 id="basic-custom-state-machine"><a class="header" href="#basic-custom-state-machine">Basic Custom State Machine</a></h2>
<h3 id="simple-implementation"><a class="header" href="#simple-implementation">Simple Implementation</a></h3>
<pre><code class="language-lua">local Signal = require(game.ReplicatedStorage.Signal) -- Use any signal library

local CustomStateMachine = {}
CustomStateMachine.__index = CustomStateMachine

function CustomStateMachine.new()
    local self = setmetatable({}, CustomStateMachine)
    
    -- Create signals
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    -- Properties
    self.WalkSpeed = 16
    self._currentState = Enum.HumanoidStateType.Running
    
    return self
end

function CustomStateMachine:SetState(newState)
    local oldState = self._currentState
    self._currentState = newState
    self.StateChanged:Fire(oldState, newState)
end

function CustomStateMachine:FireRunning(speed)
    self.Running:Fire(speed)
end

function CustomStateMachine:FireJumping()
    self.Jumping:Fire()
end

return CustomStateMachine
</code></pre>
<h3 id="using-with-simpleanimate"><a class="header" href="#using-with-simpleanimate">Using with SimpleAnimate</a></h3>
<pre><code class="language-lua">local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)
local CustomStateMachine = require(game.ReplicatedStorage.CustomStateMachine)

-- Create custom state machine
local stateMachine = CustomStateMachine.new()

-- Create controller with custom state machine
local controller = SimpleAnimate.new(
    character,
    true,
    nil,
    nil,
    stateMachine
)

-- Now control animations through your state machine
stateMachine:FireRunning(10) -- Triggers walk animation
stateMachine:FireRunning(20) -- Triggers run animation
stateMachine:FireJumping()   -- Triggers jump animation
</code></pre>
<h2 id="vehicle-state-machine"><a class="header" href="#vehicle-state-machine">Vehicle State Machine</a></h2>
<p>Control character animations while in a vehicle:</p>
<pre><code class="language-lua">local VehicleStateMachine = {}
VehicleStateMachine.__index = VehicleStateMachine

function VehicleStateMachine.new(vehicle)
    local self = setmetatable({}, VehicleStateMachine)
    
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    self.WalkSpeed = 0
    self._vehicle = vehicle
    self._currentState = Enum.HumanoidStateType.Seated
    
    -- Monitor vehicle speed
    game:GetService("RunService").Heartbeat:Connect(function()
        local velocity = vehicle.AssemblyLinearVelocity
        local speed = velocity.Magnitude
        
        -- Map vehicle speed to animation speed
        if speed &gt; 5 then
            self.Running:Fire(speed)
        else
            self.Running:Fire(0)
        end
    end)
    
    return self
end

return VehicleStateMachine
</code></pre>
<p>Usage:</p>
<pre><code class="language-lua">-- When player enters vehicle
local vehicleStateMachine = VehicleStateMachine.new(vehicle)

-- Create controller with vehicle state machine
local controller = SimpleAnimate.new(
    character,
    true,
    drivingAnimations, -- Custom driving animations
    nil,
    vehicleStateMachine
)

-- Animations now respond to vehicle movement
</code></pre>
<h2 id="network-replicated-state-machine"><a class="header" href="#network-replicated-state-machine">Network-Replicated State Machine</a></h2>
<p>Synchronize animation states across server and clients:</p>
<pre><code class="language-lua">local ReplicatedStateMachine = {}
ReplicatedStateMachine.__index = ReplicatedStateMachine

function ReplicatedStateMachine.new(character)
    local self = setmetatable({}, ReplicatedStateMachine)
    
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    self.WalkSpeed = 16
    
    -- Create remote events for replication
    local remoteFolder = Instance.new("Folder")
    remoteFolder.Name = "AnimationStates"
    remoteFolder.Parent = character
    
    local runningRemote = Instance.new("RemoteEvent")
    runningRemote.Name = "Running"
    runningRemote.Parent = remoteFolder
    
    local jumpingRemote = Instance.new("RemoteEvent")
    jumpingRemote.Name = "Jumping"
    jumpingRemote.Parent = remoteFolder
    
    -- Server: Fire to clients
    if game:GetService("RunService"):IsServer() then
        self.Running:Connect(function(speed)
            runningRemote:FireAllClients(speed)
        end)
        
        self.Jumping:Connect(function()
            jumpingRemote:FireAllClients()
        end)
    end
    
    -- Client: Listen from server
    if game:GetService("RunService"):IsClient() then
        runningRemote.OnClientEvent:Connect(function(speed)
            self.Running:Fire(speed)
        end)
        
        jumpingRemote.OnClientEvent:Connect(function()
            self.Jumping:Fire()
        end)
    end
    
    return self
end

return ReplicatedStateMachine
</code></pre>
<h2 id="custom-movement-controller"><a class="header" href="#custom-movement-controller">Custom Movement Controller</a></h2>
<p>Integrate with a custom character controller:</p>
<pre><code class="language-lua">local CustomController = {}
CustomController.__index = CustomController

function CustomController.new(character)
    local self = setmetatable({}, CustomController)
    
    self.Character = character
    self.StateMachine = {
        Running = Signal.new(),
        Jumping = Signal.new(),
        Climbing = Signal.new(),
        Swimming = Signal.new(),
        StateChanged = Signal.new(),
        WalkSpeed = 16
    }
    
    self._velocity = Vector3.zero
    self._isJumping = false
    
    return self
end

function CustomController:Update(dt)
    -- Custom movement logic
    local moveDirection = self:GetMoveDirection()
    self._velocity = moveDirection * self.StateMachine.WalkSpeed
    
    -- Update character position
    local hrp = self.Character.HumanoidRootPart
    hrp.CFrame += self._velocity * dt
    
    -- Fire running event with speed
    local speed = self._velocity.Magnitude
    self.StateMachine.Running:Fire(speed)
end

function CustomController:Jump()
    if not self._isJumping then
        self._isJumping = true
        self.StateMachine.Jumping:Fire()
        
        task.delay(0.5, function()
            self._isJumping = false
        end)
    end
end

function CustomController:GetMoveDirection()
    -- Your input handling here
    return Vector3.zero
end

return CustomController
</code></pre>
<p>Usage:</p>
<pre><code class="language-lua">local CustomController = require(game.ReplicatedStorage.CustomController)
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

-- Create custom controller
local controller = CustomController.new(character)

-- Create animation controller with custom state machine
local animController = SimpleAnimate.new(
    character,
    true,
    nil,
    nil,
    controller.StateMachine
)

-- Update loop
game:GetService("RunService").Heartbeat:Connect(function(dt)
    controller:Update(dt)
end)
</code></pre>
<h2 id="swimming-state-machine"><a class="header" href="#swimming-state-machine">Swimming State Machine</a></h2>
<p>Custom swimming mechanics with state machine:</p>
<pre><code class="language-lua">local SwimStateMachine = {}
SwimStateMachine.__index = SwimStateMachine

function SwimStateMachine.new(character)
    local self = setmetatable({}, SwimStateMachine)
    
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    self.WalkSpeed = 16
    self._inWater = false
    self._swimSpeed = 0
    
    -- Detect water regions
    local hrp = character:WaitForChild("HumanoidRootPart")
    
    hrp.Touched:Connect(function(hit)
        if hit:IsA("Part") and hit.Name == "Water" then
            self._inWater = true
            self:SetState(Enum.HumanoidStateType.Swimming)
        end
    end)
    
    hrp.TouchEnded:Connect(function(hit)
        if hit:IsA("Part") and hit.Name == "Water" then
            self._inWater = false
            self:SetState(Enum.HumanoidStateType.Running)
        end
    end)
    
    return self
end

function SwimStateMachine:SetState(state)
    self.StateChanged:Fire(self._currentState or state, state)
    self._currentState = state
end

function SwimStateMachine:Update(velocity)
    if self._inWater then
        self._swimSpeed = velocity.Magnitude
        self.Swimming:Fire(self._swimSpeed)
    else
        self.Running:Fire(velocity.Magnitude)
    end
end

return SwimStateMachine
</code></pre>
<h2 id="flying-state-machine"><a class="header" href="#flying-state-machine">Flying State Machine</a></h2>
<p>For characters that can fly:</p>
<pre><code class="language-lua">local FlyStateMachine = {}
FlyStateMachine.__index = FlyStateMachine

function FlyStateMachine.new()
    local self = setmetatable({}, FlyStateMachine)
    
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    self.WalkSpeed = 16
    self._isFlying = false
    self._flySpeed = 0
    
    return self
end

function FlyStateMachine:StartFlying()
    self._isFlying = true
    self.StateChanged:Fire(
        Enum.HumanoidStateType.Running,
        Enum.HumanoidStateType.Flying
    )
end

function FlyStateMachine:StopFlying()
    self._isFlying = false
    self.StateChanged:Fire(
        Enum.HumanoidStateType.Flying,
        Enum.HumanoidStateType.Freefall
    )
end

function FlyStateMachine:UpdateFlySpeed(speed)
    if self._isFlying then
        self._flySpeed = speed
        self.Swimming:Fire(speed) -- Reuse swimming for flying
    else
        self.Running:Fire(speed)
    end
end

return FlyStateMachine
</code></pre>
<h2 id="ai-state-machine"><a class="header" href="#ai-state-machine">AI State Machine</a></h2>
<p>For NPC characters with AI:</p>
<pre><code class="language-lua">local AIStateMachine = {}
AIStateMachine.__index = AIStateMachine

function AIStateMachine.new(npc)
    local self = setmetatable({}, AIStateMachine)
    
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    self.WalkSpeed = 16
    self._npc = npc
    self._currentBehavior = "idle"
    
    return self
end

function AIStateMachine:SetBehavior(behavior)
    self._currentBehavior = behavior
    
    if behavior == "patrol" then
        self:StartPatrol()
    elseif behavior == "chase" then
        self:StartChase()
    elseif behavior == "idle" then
        self:StopMovement()
    end
end

function AIStateMachine:StartPatrol()
    self.Running:Fire(8) -- Walk speed
end

function AIStateMachine:StartChase()
    self.Running:Fire(20) -- Run speed
end

function AIStateMachine:StopMovement()
    self.Running:Fire(0)
end

function AIStateMachine:DoAction(action)
    if action == "jump" then
        self.Jumping:Fire()
    end
end

return AIStateMachine
</code></pre>
<p>Usage with AI:</p>
<pre><code class="language-lua">local aiStateMachine = AIStateMachine.new(npc)
local controller = SimpleAnimate.new(npc, true, nil, nil, aiStateMachine)

-- AI behavior
while true do
    task.wait(5)
    
    local player = findNearestPlayer(npc)
    
    if player and (player.Character.HumanoidRootPart.Position - npc.HumanoidRootPart.Position).Magnitude &lt; 50 then
        aiStateMachine:SetBehavior("chase")
    else
        aiStateMachine:SetBehavior("patrol")
    end
end
</code></pre>
<h2 id="state-machine-debugging"><a class="header" href="#state-machine-debugging">State Machine Debugging</a></h2>
<p>Helper to debug state machine events:</p>
<pre><code class="language-lua">local function debugStateMachine(stateMachine, name)
    print("=== Debugging State Machine:", name, "===")
    
    stateMachine.Running:Connect(function(speed)
        print("[Running]", speed)
    end)
    
    stateMachine.Jumping:Connect(function()
        print("[Jumping]")
    end)
    
    stateMachine.Climbing:Connect(function(speed)
        print("[Climbing]", speed)
    end)
    
    stateMachine.Swimming:Connect(function(speed)
        print("[Swimming]", speed)
    end)
    
    stateMachine.StateChanged:Connect(function(old, new)
        print("[StateChanged]", old.Name, "-&gt;", new.Name)
    end)
end

-- Usage
debugStateMachine(customStateMachine, "CustomController")
</code></pre>
<h2 id="best-practices-1"><a class="header" href="#best-practices-1">Best Practices</a></h2>
<ol>
<li><strong>Implement all required events</strong>: Even if unused, provide them for compatibility</li>
<li><strong>Fire events consistently</strong>: Match Humanoid behavior for predictable results</li>
<li><strong>Handle edge cases</strong>: Test state transitions thoroughly</li>
<li><strong>Provide sensible defaults</strong>: Set reasonable default values</li>
<li><strong>Document your interface</strong>: Clearly document what your state machine does</li>
<li><strong>Test with SimpleAnimate</strong>: Ensure animations trigger as expected</li>
<li><strong>Consider replication</strong>: Decide if states need to sync across network</li>
</ol>
<h2 id="common-pitfalls"><a class="header" href="#common-pitfalls">Common Pitfalls</a></h2>
<h3 id="missing-events"><a class="header" href="#missing-events">Missing Events</a></h3>
<pre><code class="language-lua">-- ❌ BAD: Missing events
local stateMachine = {
    Running = Signal.new(),
    WalkSpeed = 16
}
-- Will error when SimpleAnimate tries to connect to missing events

-- ✅ GOOD: All events present
local stateMachine = {
    Running = Signal.new(),
    Jumping = Signal.new(),
    Climbing = Signal.new(),
    Swimming = Signal.new(),
    StateChanged = Signal.new(),
    WalkSpeed = 16
}
</code></pre>
<h3 id="wrong-signal-signatures"><a class="header" href="#wrong-signal-signatures">Wrong Signal Signatures</a></h3>
<pre><code class="language-lua">-- ❌ BAD: Wrong signature
self.Running:Fire() -- Missing speed parameter

-- ✅ GOOD: Correct signature
self.Running:Fire(16) -- Includes speed
</code></pre>
<h3 id="not-updating-walkspeed"><a class="header" href="#not-updating-walkspeed">Not Updating WalkSpeed</a></h3>
<pre><code class="language-lua">-- ❌ BAD: Static WalkSpeed
self.WalkSpeed = 16 -- Never changes

-- ✅ GOOD: Dynamic WalkSpeed
function StateMachine:SetSpeed(speed)
    self.WalkSpeed = speed
    self.Running:Fire(speed)
end
</code></pre>
<h2 id="complete-example"><a class="header" href="#complete-example">Complete Example</a></h2>
<p>Full custom state machine implementation:</p>
<pre><code class="language-lua">local Signal = require(game.ReplicatedStorage.Signal)

local CustomStateMachine = {}
CustomStateMachine.__index = CustomStateMachine

function CustomStateMachine.new(character)
    local self = setmetatable({}, CustomStateMachine)
    
    -- Required signals
    self.Running = Signal.new()
    self.Jumping = Signal.new()
    self.Climbing = Signal.new()
    self.Swimming = Signal.new()
    self.StateChanged = Signal.new()
    
    -- Required properties
    self.WalkSpeed = 16
    
    -- Internal state
    self._character = character
    self._currentState = Enum.HumanoidStateType.Running
    self._velocity = Vector3.zero
    
    return self
end

function CustomStateMachine:Update(dt)
    -- Update movement and fire events
    local speed = self._velocity.Magnitude
    self.Running:Fire(speed)
end

function CustomStateMachine:Jump()
    self.Jumping:Fire()
    self:SetState(Enum.HumanoidStateType.Jumping)
end

function CustomStateMachine:SetState(newState)
    local oldState = self._currentState
    self._currentState = newState
    self.StateChanged:Fire(oldState, newState)
end

function CustomStateMachine:SetVelocity(velocity)
    self._velocity = velocity
end

return CustomStateMachine
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="animation-packages-guide"><a class="header" href="#animation-packages-guide">Animation Packages Guide</a></h1>
<p>This guide covers how to work with Roblox animation packages and player-equipped animations in SimpleAnimate.</p>
<h2 id="what-are-animation-packages"><a class="header" href="#what-are-animation-packages">What are Animation Packages?</a></h2>
<p>Animation packages are collections of animations that players can equip from the Roblox catalog. They include:</p>
<ul>
<li>Movement animations (idle, walk, run, jump)</li>
<li>Emote animations (wave, dance, laugh, etc.)</li>
<li>Custom character animations based on player preferences</li>
</ul>
<p>SimpleAnimate can automatically load these player-equipped animations.</p>
<h2 id="loading-player-animations"><a class="header" href="#loading-player-animations">Loading Player Animations</a></h2>
<h3 id="server-side-loading"><a class="header" href="#server-side-loading">Server-Side Loading</a></h3>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Wait for animator
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        
        -- Load player's animation package
        local coreAnims = SimpleAnimate.getAnimPackageAsync(player)
        local emoteAnims = SimpleAnimate.getEmotePackageAsync(player)
        
        -- Create controller with player's animations
        local controller = SimpleAnimate.new(
            character,
            true,
            coreAnims,
            emoteAnims
        )
        
        print(player.Name, "loaded with custom animations")
    end)
end)
</code></pre>
<h3 id="client-side-loading"><a class="header" href="#client-side-loading">Client-Side Loading</a></h3>
<pre><code class="language-lua">-- LocalScript in StarterPlayer.StarterCharacterScripts
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)
local character = script.Parent

-- Get local player's animations (no player parameter needed on client)
local coreAnims = SimpleAnimate.getAnimPackageAsync()
local emoteAnims = SimpleAnimate.getEmotePackageAsync()

-- Create controller
local controller = SimpleAnimate.new(
    character,
    true,
    coreAnims,
    emoteAnims
)
</code></pre>
<h2 id="fallback-animations"><a class="header" href="#fallback-animations">Fallback Animations</a></h2>
<p>When loading animation packages, provide fallbacks for missing animations:</p>
<h3 id="using-default-fallbacks"><a class="header" href="#using-default-fallbacks">Using Default Fallbacks</a></h3>
<pre><code class="language-lua">-- If player doesn't have custom animations, R15 defaults are used
local coreAnims = SimpleAnimate.getAnimPackageAsync(player)
-- Missing animations automatically filled with R15 defaults
</code></pre>
<h3 id="custom-fallbacks"><a class="header" href="#custom-fallbacks">Custom Fallbacks</a></h3>
<pre><code class="language-lua">-- Define your custom fallback animations
local customDefaults = {
    Idle = {{id = "rbxassetid://YOUR_IDLE", weight = 10}},
    Walk = {{id = "rbxassetid://YOUR_WALK", weight = 10}},
    Run = {{id = "rbxassetid://YOUR_RUN", weight = 10}}
}

-- Use custom fallbacks
local coreAnims = SimpleAnimate.getAnimPackageAsync(player, customDefaults)

-- Now if player doesn't have custom animations, your defaults are used
</code></pre>
<h3 id="selective-fallbacks"><a class="header" href="#selective-fallbacks">Selective Fallbacks</a></h3>
<pre><code class="language-lua">-- Get player's animations
local coreAnims = SimpleAnimate.getAnimPackageAsync(player)

-- Override specific animations with your own
coreAnims.Idle = {{id = "rbxassetid://YOUR_SPECIAL_IDLE", weight = 10}}

-- Keep player's other animations, but force your idle
local controller = SimpleAnimate.new(character, true, coreAnims)
</code></pre>
<h2 id="mixing-player-and-custom-animations-1"><a class="header" href="#mixing-player-and-custom-animations-1">Mixing Player and Custom Animations</a></h2>
<h3 id="player-animations-with-custom-emotes"><a class="header" href="#player-animations-with-custom-emotes">Player Animations with Custom Emotes</a></h3>
<pre><code class="language-lua">-- Use player's movement animations
local coreAnims = SimpleAnimate.getAnimPackageAsync(player)

-- But use your custom emotes
local customEmotes = {
    wave = {{id = "rbxassetid://CUSTOM_WAVE", weight = 10}},
    dance = {{id = "rbxassetid://CUSTOM_DANCE", weight = 10}},
    cheer = {{id = "rbxassetid://CUSTOM_CHEER", weight = 10}}
}

local controller = SimpleAnimate.new(
    character,
    true,
    coreAnims,
    customEmotes
)
</code></pre>
<h3 id="custom-animations-with-player-emotes"><a class="header" href="#custom-animations-with-player-emotes">Custom Animations with Player Emotes</a></h3>
<pre><code class="language-lua">-- Use your custom movement animations
local customCore = {
    Idle = {{id = "rbxassetid://YOUR_IDLE", weight = 10}},
    Walk = {{id = "rbxassetid://YOUR_WALK", weight = 10}},
    Run = {{id = "rbxassetid://YOUR_RUN", weight = 10}}
}

-- But keep player's emotes
local emoteAnims = SimpleAnimate.getEmotePackageAsync(player)

local controller = SimpleAnimate.new(
    character,
    true,
    customCore,
    emoteAnims
)
</code></pre>
<h2 id="handling-different-rig-types"><a class="header" href="#handling-different-rig-types">Handling Different Rig Types</a></h2>
<h3 id="r6-vs-r15-detection"><a class="header" href="#r6-vs-r15-detection">R6 vs R15 Detection</a></h3>
<pre><code class="language-lua">local function getRigType(character)
    local humanoid = character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        return humanoid.RigType == Enum.HumanoidRigType.R6 and "R6" or "R15"
    end
    return "R15" -- Default
end

local function setupCharacter(player, character)
    local rigType = getRigType(character)
    
    -- Get appropriate defaults
    local defaultCore, defaultEmotes = SimpleAnimate.getCopyOfAnims(rigType)
    
    -- Load player's animations with appropriate fallbacks
    local coreAnims = SimpleAnimate.getAnimPackageAsync(player, defaultCore)
    local emoteAnims = SimpleAnimate.getEmotePackageAsync(player, defaultEmotes)
    
    local controller = SimpleAnimate.new(character, true, coreAnims, emoteAnims)
end
</code></pre>
<h3 id="force-specific-rig-type"><a class="header" href="#force-specific-rig-type">Force Specific Rig Type</a></h3>
<pre><code class="language-lua">-- Always use R15 animations regardless of player's equipped package
local r15Core, r15Emotes = SimpleAnimate.getCopyOfAnims("R15")

local controller = SimpleAnimate.new(
    character,
    true,
    r15Core,
    r15Emotes
)
</code></pre>
<h2 id="caching-animation-packages"><a class="header" href="#caching-animation-packages">Caching Animation Packages</a></h2>
<p>Cache player animation packages to avoid repeated API calls:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

-- Cache player animations
local playerAnimCache = {}

local function getPlayerAnimations(player)
    -- Check cache first
    if playerAnimCache[player.UserId] then
        return playerAnimCache[player.UserId]
    end
    
    -- Load from API
    local coreAnims = SimpleAnimate.getAnimPackageAsync(player)
    local emoteAnims = SimpleAnimate.getEmotePackageAsync(player)
    
    -- Cache for future use
    playerAnimCache[player.UserId] = {
        core = coreAnims,
        emotes = emoteAnims
    }
    
    return playerAnimCache[player.UserId]
end

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local anims = getPlayerAnimations(player)
        
        local controller = SimpleAnimate.new(
            character,
            true,
            anims.core,
            anims.emotes
        )
    end)
end)

-- Clear cache when player leaves
Players.PlayerRemoving:Connect(function(player)
    playerAnimCache[player.UserId] = nil
end)
</code></pre>
<h2 id="validating-animation-packages"><a class="header" href="#validating-animation-packages">Validating Animation Packages</a></h2>
<p>Check if animations loaded successfully:</p>
<pre><code class="language-lua">local function validateAnimationPackage(anims, packageName)
    local requiredPoses = {"Idle", "Walk", "Run", "Jump"}
    
    for _, pose in requiredPoses do
        if not anims[pose] or #anims[pose] == 0 then
            warn(packageName, "missing", pose, "animation")
            return false
        end
    end
    
    return true
end

-- Usage
local coreAnims = SimpleAnimate.getAnimPackageAsync(player)

if validateAnimationPackage(coreAnims, "Core Animations") then
    print("Animation package valid")
else
    -- Use defaults instead
    coreAnims = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")
end
</code></pre>
<h2 id="overriding-specific-animations"><a class="header" href="#overriding-specific-animations">Overriding Specific Animations</a></h2>
<h3 id="keep-player-package-override-one-pose"><a class="header" href="#keep-player-package-override-one-pose">Keep Player Package, Override One Pose</a></h3>
<pre><code class="language-lua">local coreAnims = SimpleAnimate.getAnimPackageAsync(player)

-- Player has custom animations, but we want a special idle
coreAnims.Idle = {
    {
        id = "rbxassetid://SPECIAL_IDLE",
        weight = 10,
        speed = 0.8,
        fadeTime = 0.3
    }
}

local controller = SimpleAnimate.new(character, true, coreAnims)
</code></pre>
<h3 id="blend-custom-with-player-animations"><a class="header" href="#blend-custom-with-player-animations">Blend Custom with Player Animations</a></h3>
<pre><code class="language-lua">local coreAnims = SimpleAnimate.getAnimPackageAsync(player)

-- Add variants to player's animations
table.insert(coreAnims.Idle, {
    id = "rbxassetid://EXTRA_IDLE_VARIANT",
    weight = 3, -- Lower weight = less common
    fadeTime = 0.3
})

-- Now player has their animations PLUS your variant
local controller = SimpleAnimate.new(character, true, coreAnims)
</code></pre>
<h2 id="animation-package-metadata"><a class="header" href="#animation-package-metadata">Animation Package Metadata</a></h2>
<p>Store and retrieve animation package information:</p>
<pre><code class="language-lua">local AnimationPackages = {
    Stylish = {
        name = "Stylish",
        description = "Cool and modern animations",
        animations = {
            Idle = {{id = "rbxassetid://001", weight = 10}},
            Walk = {{id = "rbxassetid://002", weight = 10}},
            Run = {{id = "rbxassetid://003", weight = 10}}
        }
    },
    Classic = {
        name = "Classic",
        description = "Traditional Roblox animations",
        animations = SimpleAnimate.getCopyOfAnims("R15")
    }
}

local function applyPackage(player, packageName)
    local package = AnimationPackages[packageName]
    
    if not package then
        warn("Package not found:", packageName)
        return
    end
    
    player.CharacterAdded:Connect(function(character)
        local controller = SimpleAnimate.new(
            character,
            true,
            package.animations
        )
        
        print("Applied", package.name, "to", player.Name)
    end)
end

-- Usage
applyPackage(player, "Stylish")
</code></pre>
<h2 id="dynamic-package-switching"><a class="header" href="#dynamic-package-switching">Dynamic Package Switching</a></h2>
<p>Allow players to switch animation packages at runtime:</p>
<pre><code class="language-lua">local currentControllers = {}

local function switchAnimationPackage(player, packageName)
    local character = player.Character
    if not character then return end
    
    -- Destroy old controller
    if currentControllers[player] then
        currentControllers[player]:Destroy()
    end
    
    -- Get new package
    local package = AnimationPackages[packageName]
    
    -- Create new controller
    local controller = SimpleAnimate.new(
        character,
        true,
        package.animations
    )
    
    currentControllers[player] = controller
    
    print(player.Name, "switched to", packageName)
end

-- Remote event for switching
local switchPackageRemote = game.ReplicatedStorage.SwitchAnimPackage

switchPackageRemote.OnServerEvent:Connect(function(player, packageName)
    switchAnimationPackage(player, packageName)
end)
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>Robust error handling for animation package loading:</p>
<pre><code class="language-lua">local function safeLoadAnimations(player)
    local success, coreAnims = pcall(function()
        return SimpleAnimate.getAnimPackageAsync(player)
    end)
    
    if not success then
        warn("Failed to load player animations:", coreAnims)
        -- Use defaults
        coreAnims = SimpleAnimate.getCopyOfAnimsList("R15", "Animations")
    end
    
    local success2, emoteAnims = pcall(function()
        return SimpleAnimate.getEmotePackageAsync(player)
    end)
    
    if not success2 then
        warn("Failed to load player emotes:", emoteAnims)
        emoteAnims = SimpleAnimate.getCopyOfAnimsList("R15", "Emotes")
    end
    
    return coreAnims, emoteAnims
end

-- Usage
Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local coreAnims, emoteAnims = safeLoadAnimations(player)
        
        local controller = SimpleAnimate.new(
            character,
            true,
            coreAnims,
            emoteAnims
        )
    end)
end)
</code></pre>
<h2 id="package-selection-ui"><a class="header" href="#package-selection-ui">Package Selection UI</a></h2>
<p>Create a UI for players to choose animation packages:</p>
<pre><code class="language-lua">-- Client Script
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create UI
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.Parent = screenGui

-- List of packages
local packages = {"Default", "Stylish", "Athletic", "Ninja", "Robot"}

for i, packageName in packages do
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 50)
    button.Position = UDim2.new(0, 10, 0, (i - 1) * 60 + 10)
    button.Text = packageName
    button.Parent = frame
    
    button.MouseButton1Click:Connect(function()
        -- Request package change
        ReplicatedStorage.SwitchAnimPackage:FireServer(packageName)
    end)
end
</code></pre>
<h2 id="pre-loading-animation-packages"><a class="header" href="#pre-loading-animation-packages">Pre-Loading Animation Packages</a></h2>
<p>Pre-load animation packages before character spawns:</p>
<pre><code class="language-lua">local loadedPackages = {}

-- Pre-load all packages on server start
local function preLoadPackages()
    for name, package in AnimationPackages do
        print("Pre-loading package:", name)
        loadedPackages[name] = package.animations
    end
end

preLoadPackages()

-- Instant assignment when player spawns
Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local packageName = player:GetAttribute("AnimPackage") or "Default"
        local anims = loadedPackages[packageName]
        
        local controller = SimpleAnimate.new(character, true, anims)
    end)
end)
</code></pre>
<h2 id="best-practices-2"><a class="header" href="#best-practices-2">Best Practices</a></h2>
<ol>
<li><strong>Always provide fallbacks</strong>: Handle cases where player animations fail to load</li>
<li><strong>Cache when possible</strong>: Avoid repeated API calls for the same player</li>
<li><strong>Validate packages</strong>: Check that required animations exist</li>
<li><strong>Handle errors gracefully</strong>: Use pcall for API calls</li>
<li><strong>Test with different rigs</strong>: Ensure compatibility with R6 and R15</li>
<li><strong>Consider performance</strong>: Pre-load packages when possible</li>
<li><strong>Respect player choice</strong>: Let players use their equipped animations when appropriate</li>
<li><strong>Provide options</strong>: Give players ability to override with custom packages</li>
</ol>
<h2 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h2>
<h3 id="animations-not-loading"><a class="header" href="#animations-not-loading">Animations Not Loading</a></h3>
<pre><code class="language-lua">-- ❌ Problem: Server call without player parameter
local anims = SimpleAnimate.getAnimPackageAsync() -- Error on server!

-- ✅ Solution: Always pass player on server
local anims = SimpleAnimate.getAnimPackageAsync(player)
</code></pre>
<h3 id="missing-animations"><a class="header" href="#missing-animations">Missing Animations</a></h3>
<pre><code class="language-lua">-- ❌ Problem: Not providing fallbacks
local anims = SimpleAnimate.getAnimPackageAsync(player)
-- Some poses might be missing

-- ✅ Solution: Provide fallbacks
local defaults = SimpleAnimate.getCopyOfAnims("R15")
local anims = SimpleAnimate.getAnimPackageAsync(player, defaults)
</code></pre>
<h3 id="repeated-loading"><a class="header" href="#repeated-loading">Repeated Loading</a></h3>
<pre><code class="language-lua">-- ❌ Problem: Loading on every character spawn
player.CharacterAdded:Connect(function(character)
    local anims = SimpleAnimate.getAnimPackageAsync(player) -- Loads every time
end)

-- ✅ Solution: Cache the results
local playerAnims = SimpleAnimate.getAnimPackageAsync(player)

player.CharacterAdded:Connect(function(character)
    local controller = SimpleAnimate.new(character, true, playerAnims)
end)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-character-setup"><a class="header" href="#basic-character-setup">Basic Character Setup</a></h1>
<h2 id="simple-setup-server"><a class="header" href="#simple-setup-server">Simple Setup (Server)</a></h2>
<p>The most basic setup for handling all players:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Wait for animator to load
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        
        -- Create controller
        local controller = SimpleAnimate.new(character)
        
        print(player.Name, "animation controller ready!")
    end)
end)
</code></pre>
<h2 id="with-player-animation-packages"><a class="header" href="#with-player-animation-packages">With Player Animation Packages</a></h2>
<p>Load each player's equipped animations:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        
        -- Get player's animation package
        local coreAnims = SimpleAnimate.getAnimPackageAsync(player)
        local emoteAnims = SimpleAnimate.getEmotePackageAsync(player)
        
        -- Create controller with player's animations
        local controller = SimpleAnimate.new(
            character,
            true,
            coreAnims,
            emoteAnims
        )
    end)
end)
</code></pre>
<h2 id="client-side-setup"><a class="header" href="#client-side-setup">Client-Side Setup</a></h2>
<p>Setup on the client for the local player:</p>
<pre><code class="language-lua">-- LocalScript in StarterPlayer.StarterCharacterScripts
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)
local character = script.Parent

-- Create controller
local controller = SimpleAnimate.new(character)

-- Listen for pose changes
controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose)
    print("Pose changed:", oldPose, "-&gt;", newPose)
end)
</code></pre>
<h2 id="with-custom-default-animations"><a class="header" href="#with-custom-default-animations">With Custom Default Animations</a></h2>
<p>Replace default animations with your own:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

-- Define custom animations
local customAnims = {
    Idle = {
        {id = "rbxassetid://123456789", weight = 10, fadeTime = 0.1}
    },
    Walk = {
        {id = "rbxassetid://111111111", weight = 10}
    },
    Run = {
        {id = "rbxassetid://222222222", weight = 10}
    },
    Jump = {
        {id = "rbxassetid://333333333", weight = 10}
    },
    -- Add more poses...
}

local customEmotes = {
    wave = {
        {id = "rbxassetid://444444444", weight = 10}
    },
    dance = {
        {id = "rbxassetid://555555555", weight = 10}
    }
}

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        
        local controller = SimpleAnimate.new(
            character,
            true,
            customAnims,
            customEmotes
        )
    end)
end)
</code></pre>
<h2 id="with-emote-menu-integration"><a class="header" href="#with-emote-menu-integration">With Emote Menu Integration</a></h2>
<p>Set up the emote menu to work with SimpleAnimate:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        local humanoid = character:WaitForChild("Humanoid")
        
        local controller = SimpleAnimate.new(character)
        
        -- Hook up emote bindable
        local emoteBindable = Instance.new("BindableFunction")
        emoteBindable.Parent = character
        
        controller.Action:SetEmoteBindable(emoteBindable)
        
        -- Set the humanoid's emote bindable
        humanoid:SetEmoteBindableFunction(emoteBindable)
    end)
end)
</code></pre>
<h2 id="character-respawn-handling"><a class="header" href="#character-respawn-handling">Character Respawn Handling</a></h2>
<p>Properly handle character respawns:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

local playerControllers = {}

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Clean up old controller if it exists
        if playerControllers[player] then
            playerControllers[player]:Destroy()
        end
        
        local animator = character:WaitForChild("Humanoid"):WaitForChild("Animator")
        
        -- Create new controller
        local controller = SimpleAnimate.new(character)
        playerControllers[player] = controller
    end)
    
    player.CharacterRemoving:Connect(function()
        if playerControllers[player] then
            playerControllers[player]:Destroy()
            playerControllers[player] = nil
        end
    end)
end)

Players.PlayerRemoving:Connect(function(player)
    playerControllers[player] = nil
end)
</code></pre>
<h2 id="with-animation-preloading-disabled"><a class="header" href="#with-animation-preloading-disabled">With Animation Preloading Disabled</a></h2>
<p>Disable preloading if you want animations to load on-demand:</p>
<pre><code class="language-lua">local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

-- Preloading disabled (3rd parameter = false)
local controller = SimpleAnimate.new(
    character,
    false -- Don't preload
)

-- Animations will load when first played
</code></pre>
<h2 id="multiple-characters-npcs"><a class="header" href="#multiple-characters-npcs">Multiple Characters (NPCs)</a></h2>
<p>Set up animation controllers for NPC characters:</p>
<pre><code class="language-lua">local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

local function setupNPC(npc)
    local animator = npc:WaitForChild("Humanoid"):WaitForChild("Animator")
    
    -- Create controller for NPC
    local controller = SimpleAnimate.new(npc)
    
    -- Store reference if needed
    npc:SetAttribute("HasAnimController", true)
    
    return controller
end

-- Setup all NPCs in workspace
for _, npc in workspace.NPCs:GetChildren() do
    if npc:IsA("Model") and npc:FindFirstChild("Humanoid") then
        setupNPC(npc)
    end
end

-- Setup new NPCs as they're added
workspace.NPCs.ChildAdded:Connect(function(npc)
    if npc:IsA("Model") then
        npc:WaitForChild("Humanoid")
        setupNPC(npc)
    end
end)
</code></pre>
<h2 id="with-pose-change-monitoring"><a class="header" href="#with-pose-change-monitoring">With Pose Change Monitoring</a></h2>
<p>Monitor and log all pose changes:</p>
<pre><code class="language-lua">local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

local character = player.Character or player.CharacterAdded:Wait()
local controller = SimpleAnimate.new(character)

-- Track pose changes
local poseHistory = {}

controller.Core.PoseController.PoseChanged:Connect(function(oldPose, newPose, track)
    table.insert(poseHistory, {
        from = oldPose,
        to = newPose,
        time = tick(),
        animationId = track.Animation.AnimationId
    })
    
    print(string.format("[%.2f] %s -&gt; %s", tick(), oldPose, newPose))
end)

-- Function to get pose statistics
local function getPoseStats()
    local stats = {}
    
    for _, entry in poseHistory do
        stats[entry.to] = (stats[entry.to] or 0) + 1
    end
    
    return stats
end
</code></pre>
<h2 id="error-handling-1"><a class="header" href="#error-handling-1">Error Handling</a></h2>
<p>Robust error handling for animation setup:</p>
<pre><code class="language-lua">local Players = game:GetService("Players")
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        local success, controller = pcall(function()
            local animator = character:WaitForChild("Humanoid", 5):WaitForChild("Animator", 5)
            return SimpleAnimate.new(character)
        end)
        
        if success then
            print(player.Name, "animation controller created successfully")
        else
            warn(player.Name, "failed to create animation controller:", controller)
        end
    end)
end)
</code></pre>
<h2 id="waiting-for-existing-controllers"><a class="header" href="#waiting-for-existing-controllers">Waiting for Existing Controllers</a></h2>
<p>Use <code>awaitController</code> in other scripts:</p>
<pre><code class="language-lua">-- Script A: Creates controller
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)
local controller = SimpleAnimate.new(character)

-- Script B: Waits for controller
local SimpleAnimate = require(game.ReplicatedStorage.SimpleAnimate)

local controller = SimpleAnimate.awaitController(character, 10)

if controller then
    print("Got controller!")
    controller.Action:PlayAction("wave")
else
    warn("Controller not found within timeout")
end
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
